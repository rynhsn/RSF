@using Lookup_PMCOMMON.DTOs.LML01800;
@using Lookup_PMCOMMON.DTOs.UtilityDTO;
@inherits R_Page
@attribute [R_Page(ResourceId = "_UnitTenant")]
@inject R_ILocalizer<Resources_Dummy_Class_LookupPM> _localizer

<R_StackLayout>
    <R_StackLayout Row>
        <R_ItemLayout col="1">
            <R_Label FontStyle="R_eFontStyle.Bold">
                @_localizer["_Property"]
            </R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="3">
            <R_ComboBox Data="@_viewModel.PropertyList"
                        Value="_viewModel.PropertyValue.CPROPERTY_ID"
                        ValueField="@nameof(PropertyDTO.CPROPERTY_ID)"
                        TextField="@nameof(PropertyDTO.CPROPERTY_NAME)"
                        ValueChanged="@((string value) => PropertyDropdown_OnChange(value))"
                        Enabled="@_viewModel.LenabledFilter_Property"
                        PopupMaxHeight="150px">
            </R_ComboBox>
        </R_ItemLayout>
        <R_ItemLayout col="1">
            <R_Label FontStyle="R_eFontStyle.Bold">
                @_localizer["_Floor"]
            </R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="3">
            <R_ComboBox Data="@_viewModel.FloorList"
                        Value="_viewModel.FloorValue.CFLOOR_ID"
                        ValueField="@nameof(FloorDTO.CFLOOR_ID)"
                        TextField="@nameof(FloorDTO.CFLOOR_NAME)"
                        ValueChanged="@((string value) => FloorDropdown_OnChange(value))"
                        Enabled="@_viewModel.LenabledFilter_Floor"
                        PopupMaxHeight="150px">
            </R_ComboBox>
        </R_ItemLayout>
        <R_ItemLayout Class="d-flex justify-content-end" Style="width:100%">
            <R_Button OnClick="@BtnRefresh">
                @_localizer["_refresh"]
            </R_Button>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout Row>
        <R_ItemLayout col="1">
            <R_Label FontStyle="R_eFontStyle.Bold">
                @_localizer["_Building"]
            </R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="3">
            <R_ComboBox Data="@_viewModel.BuildingList"
                        Value="_viewModel.BuildingValue.CBUILDING_ID"
                        ValueField="@nameof(BuildingDTO.CBUILDING_ID)"
                        TextField="@nameof(BuildingDTO.CBUILDING_NAME)"
                        ValueChanged="@((string value) => BuildingDropdown_OnChange(value))"
                        Enabled="@_viewModel.LenabledFilter_Building"
                        PopupMaxHeight="150px">
            </R_ComboBox>
        </R_ItemLayout>
        <R_ItemLayout col="1">
            <R_Label FontStyle="R_eFontStyle.Bold">
                @_localizer["_Unit"]
            </R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="3">
            <R_ComboBox Data="@_viewModel.UnitList"
                        Value="_viewModel.UnitValue.CUNIT_ID"
                        ValueField="@nameof(UnitDTO.CUNIT_ID)"
                        TextField="@nameof(UnitDTO.CUNIT_NAME)"
                        ValueChanged="@((string value) => UnitDropdown_OnChange(value))"
                        Enabled="@_viewModel.LenabledFilter_Unit"
                        PopupMaxHeight="150px">
            </R_ComboBox>
        </R_ItemLayout>

    </R_StackLayout>
</R_StackLayout>

<R_StackLayout Row>
    <R_Grid @ref="@GridRef"
            DataSource="_viewModel.GetList"
            R_ServiceGetListRecord="@R_ServiceGetListRecordAsync"
            R_GridType="@R_eGridType.Original"
            Pageable
            @bind-PageSize="@_pageSize"
            Height="250px"
            Width="925px">
        <R_GridColumns>
            <R_GridTextColumn Width="150px"
                              FieldName="@nameof(LML01800DTO.COWNER_OR_TENANT)"
                              HeaderText=@_localizer["_Owner/Tenant"] />
            <R_GridTextColumn Width="175px"
                              FieldName="@nameof(LML01800DTO.CTENANT_ID)"
                              HeaderText=@_localizer["_TenantId"] />
            <R_GridTextColumn Width="150px"
                                    FieldName="@nameof(LML01800DTO.CTENANT_NAME)"
                                    HeaderText=@_localizer["_TenantName"] />
            <R_GridTextColumn Width="150px"
                              FieldName="@nameof(LML01800DTO.CTENANT_GROUP_NAME)"
                              HeaderText=@_localizer["_TenantGroup"] />
            <R_GridTextColumn Width="150px"
                              FieldName="@nameof(LML01800DTO.CTENANT_CATEGORY_NAME)"
                              HeaderText=@_localizer["_TenantCat"] />
            <R_GridTextColumn Width="175px"
                              FieldName="@nameof(LML01800DTO.CTENANT_TYPE_DESCRIPTION)"
                              HeaderText=@_localizer["_TenantType"] />
            <R_GridTextColumn Width="120px"
                              FieldName="@nameof(LML01800DTO.CPHONE1)"
                              HeaderText=@_localizer["_Phone1"] />
            <R_GridTextColumn Width="175px"
                              FieldName="@nameof(LML01800DTO.CEMAIL)"
                              HeaderText=@_localizer["_Email"] />
        </R_GridColumns>
    </R_Grid>
    </R_StackLayout>
    <R_StackLayout Row Class="justify-content-end">
        <R_ItemLayout xs="2">
            <R_Button OnClick="Button_OnClickOkAsync">
                OK
            </R_Button>
        </R_ItemLayout>
        <R_ItemLayout xs="2">
            <R_Button OnClick="Button_OnClickCloseAsync">
                Cancel
            </R_Button>
        </R_ItemLayout>
    </R_StackLayout>