@page "/PMB00300"
@using PMB00300FrontResources
@using PMB00300Common.DTOs
@inherits R_Page
@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout Row Class="mb-1">
    <R_ItemLayout col="1">
        <R_Label>@_localizer["PROPERTY"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="4">
        <R_ComboBox Data="_viewModel.PropertyList"
                    Value="@_viewModel.Property.CPROPERTY_ID"
                    ValueField="@nameof(PMB00300PropertyDTO.CPROPERTY_ID)"
                    TextField="@nameof(PMB00300PropertyDTO.CPROPERTY_NAME)"
                    ValueChanged="@((string? value) => OnChangeProperty(value))"/>
    </R_ItemLayout>
    <R_ItemLayout col="1">
        <R_Button OnClick="OnClickRefresh">@_localizer["REFRESH"]</R_Button>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row>
    <R_ItemLayout col="12">
        <R_Grid @ref="_gridRef"
                DataSource="_viewModel.GridList"
                R_ConductorSource="_conductorRef"
                R_GridType="R_eGridType.Navigator"
                R_ServiceGetListRecord="GetListRecord"
                Pageable
                PageSize="23"
                Width="100%"
                Height="540px">
            <R_GridColumns>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CBUILDING_NAME)" HeaderText="@_localizer["BUILDING_NAME"]" TextAlignment="R_eTextAlignment.Left" Width="170px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CFLOOR_NAME)" HeaderText="@_localizer["FLOOR"]" TextAlignment="R_eTextAlignment.Left" Width="120px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CUNIT_NAME)" HeaderText="@_localizer["UNIT_ID"]" TextAlignment="R_eTextAlignment.Left" Width="120px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CTENANT_NAME)" HeaderText="@_localizer["TENANT"]" TextAlignment="R_eTextAlignment.Left" Width="120px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CDEPT_NAME)" HeaderText="@_localizer["DEPARTMENT"]" TextAlignment="R_eTextAlignment.Left" Width="170px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CREF_NO)" HeaderText="@_localizer["LOI_REF_NO"]" TextAlignment="R_eTextAlignment.Left" Width="200px"/>
                <R_GridDatePickerColumn FieldName="@nameof(PMB00300RecalcDTO.DHO_ACTUAL_DATE)" HeaderText="@_localizer["HO_DATE"]" Width="150px"/>
                <R_GridNumericColumn TValue="decimal" FieldName="@nameof(PMB00300RecalcDTO.NGROSS_AREA_SIZE)" HeaderText="@_localizer["GROSS_WIDTH"]" Width="140px"/>
                <R_GridNumericColumn TValue="decimal" FieldName="@nameof(PMB00300RecalcDTO.NNET_AREA_SIZE)" HeaderText="@_localizer["NET_WIDTH"]" Width="140px"/>
                <R_GridNumericColumn TValue="decimal" FieldName="@nameof(PMB00300RecalcDTO.NACTUAL_AREA_SIZE)" HeaderText="@_localizer["ACTUAL_WIDTH"]" Width="140px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CUPDATE_BY)" HeaderText="@_localizer["UPDATED_BY"]" TextAlignment="R_eTextAlignment.Left" Width="150px"/>
                <R_GridDateTimePickerColumn FieldName="@nameof(PMB00300RecalcDTO.DUPDATE_DATE)" HeaderText="@_localizer["UPDATED_DATE"]" Width="180px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CCREATE_BY)" HeaderText="@_localizer["CREATED_BY"]" TextAlignment="R_eTextAlignment.Left" Width="150px"/>
                <R_GridDateTimePickerColumn FieldName="@nameof(PMB00300RecalcDTO.DCREATE_DATE)" HeaderText="@_localizer["CREATED_DATE"]" Width="180px"/>
            </R_GridColumns>
        </R_Grid>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout>
    <R_ItemLayout>
        <R_Popup R_Before_Open_Popup="BeforeOpenPopup" R_After_Open_Popup="AfterOpenPopup" Enabled="@(_viewModel.GridList.Count>0)">@_localizer["VIEW"]</R_Popup>
    </R_ItemLayout>
</R_StackLayout>

<R_Conductor @ref="@_conductorRef"
             R_ViewModel="_viewModel"
             R_ServiceGetRecord="GetRecord"
             R_IsHeader/>