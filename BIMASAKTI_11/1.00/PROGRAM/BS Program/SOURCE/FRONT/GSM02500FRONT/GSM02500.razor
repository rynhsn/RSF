 @page "/GSM02500"
@attribute [R_Page(Title = "Property")]
@inherits R_Page
@using GSM02500COMMON.DTOs.GSM02501
@using GSM02500COMMON.DTOs.GSM02502
@using GSM02500COMMON.DTOs.GSM02503
@using GSM02500COMMON.DTOs.GSM02504
@using GSM02500MODEL

<R_TabStrip OnActiveTabIndexChanging="OnActiveTabIndexChanging">
    <R_TabStripTab Title="@_localizer["_GeneralInfo"]" Id="Property">
        <R_StackLayout Spacing="3" Row="true">
            @* Lay-Out Table Grid List *@
            <R_ItemLayout col="3">
                <R_Grid @ref="@_gridGeneralInfoRef" 
                        DataSource="@loGeneralInfoViewModel.loPropertyList"
                        R_ConductorSource="@_conductorGeneralInfoRef"
                        R_GridType="@R_eGridType.Navigator"
                        Height="320px"
                        Enabled="IsCRUDMode"
                        R_ServiceGetListRecord="@Grid_R_ServiceGetGeneralInfoListRecord">
                    <R_GridColumns>
                        <R_GridTextColumn FieldName="@nameof(GSM02501PropertyDTO.CPROPERTY_NAME)" HeaderText="Property"></R_GridTextColumn>
                    </R_GridColumns>
                </R_Grid>
            </R_ItemLayout>


            @* Lay-Out Navigator *@
            <R_ItemLayout col="8">

                <R_StackLayout Row="true" Class="justify-content-end">
                    <R_ItemLayout>
                        <R_CheckBox @bind-Value="@loGeneralInfoViewModel.Data.LACTIVE"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    Enabled="false">
                        </R_CheckBox>
                        <R_Label>@_localizer["_Active"]</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_Property"]*</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="3">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CPROPERTY_ID"
                                   R_ConductorSource="@_conductorGeneralInfoRef"
                                   R_EnableAdd="true"
                                   @ref="@_propertyIdRef"
                                   R_EnableEdit="false">
                        </R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="7">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CPROPERTY_NAME"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_EnableAdd="true"
                                    @ref="@_propertyNameRef"
                                   R_EnableEdit="true">
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_Address"]*</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="10">
                        <R_TextArea @bind-Value="@loGeneralInfoViewModel.Data.CADDRESS"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_EnableAdd="true" R_EnableEdit="true"></R_TextArea>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_Province"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="6">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CPROVINCE"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_EnableAdd="true"
                                    R_EnableEdit="true">
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_City"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="6">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CCITY"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_EnableAdd="true" R_EnableEdit="true"></R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_District"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="6">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CDISTRICT"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_EnableAdd="true" R_EnableEdit="true"></R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_SubDistrict"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="6">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CSUBDISTRICT"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_EnableAdd="true" R_EnableEdit="true"></R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_SalesTaxId"]*</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="2">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CSALES_TAX_ID"
                                   R_ConductorSource="@_conductorGeneralInfoRef"
                                   OnLostFocus="OnLostFocusSalesTax"
                                   R_EnableAdd="true"
                                   R_EnableEdit="true"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout Style="width:25px">
                        <R_Lookup R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_After_Open_Lookup="R_After_Open_LookupSalesTaxId" 
                                    R_Before_Open_Lookup="R_Before_Open_LookupSalesTaxId" 
                                    R_EnableAdd="true" 
                                    R_EnableEdit="true">...</R_Lookup>
                    </R_ItemLayout>
                    <R_ItemLayout col="5">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CSALES_TAX_NAME"
                                   R_ConductorSource="@_conductorGeneralInfoRef"
                                   Enabled="false"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_NumericTextBox Value="@loGeneralInfoViewModel.Data.NTAX_PERCENTAGE"
                                          R_ConductorSource="@_conductorGeneralInfoRef"
                                          Arrows="false"
                                          Enabled="false"></R_NumericTextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_Label>%</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_Currency"]*</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="2">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CCURRENCY"
                                   R_ConductorSource="@_conductorGeneralInfoRef"
                                   OnLostFocus="OnLostFocusCurrency"
                                   R_EnableAdd="true"
                                   R_EnableEdit="true"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout Style="width:25px">
                        <R_Lookup R_ConductorSource="@_conductorGeneralInfoRef" 
                                    R_After_Open_Lookup="R_After_Open_LookupCurrency" 
                                    R_Before_Open_Lookup="R_Before_Open_LookupCurrency" 
                                    R_EnableAdd="true" R_EnableEdit="true">...</R_Lookup>
                    </R_ItemLayout>
                    <R_ItemLayout col="5">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CCURRENCY_NAME"
                                   R_ConductorSource="@_conductorGeneralInfoRef"
                                   Enabled="false"></R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_UOM"]*</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="3">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CUOM"
                                    R_ConductorSource="@_conductorGeneralInfoRef"
                                    R_EnableAdd="true" R_EnableEdit="true"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="5">
                        <R_Label FontStyle="R_eFontStyle.Italic">(unit of measurement)</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_UpdatedBy"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CUPDATE_BY"
                                   R_ConductorSource="@_conductorGeneralInfoRef"
                                   Enabled="false"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_Label>@_localizer["_Date"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_DateTimePicker @bind-Value="@loGeneralInfoViewModel.Data.DUPDATE_DATE"
                                          R_ConductorSource="@_conductorGeneralInfoRef"
                                          Enabled="false"></R_DateTimePicker>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_CreatedBy"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_TextBox @bind-Value="@loGeneralInfoViewModel.Data.CCREATE_BY"
                                   R_ConductorSource="@_conductorGeneralInfoRef"
                                   Enabled="false"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_Label>@_localizer["_Date"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_DateTimePicker @bind-Value="@loGeneralInfoViewModel.Data.DCREATE_DATE"
                                            R_ConductorSource="@_conductorGeneralInfoRef"
                                            Enabled="false"></R_DateTimePicker>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Row Class="justify-content-between">
            <R_ItemLayout>
                <R_AddButton R_Conductor="@_conductorGeneralInfoRef"></R_AddButton>
                <R_EditButton R_Conductor="@_conductorGeneralInfoRef"></R_EditButton>
                <R_DeleteButton R_Conductor="@_conductorGeneralInfoRef"></R_DeleteButton>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_Popup R_ConductorSource="@_conductorGeneralInfoRef"
                         R_Before_Open_Popup="@R_Before_Open_Popup_ActivateInactiveGeneralInfo"
                         R_After_Open_Popup="@R_After_Open_Popup_ActivateInactiveGeneralInfo"
                         R_EnableOther>@loGeneralInfoLabel</R_Popup>
                <R_Detail R_ConductorSource="_conductorGeneralInfoRef"
                          R_Before_Open_Detail="R_Before_OpenBuilding_Detail"
                          R_After_Open_Detail="R_After_OpenBuilding_Detail"
                          Enabled="IsBuildingDetailEnabled">@_localizer["_Building"]</R_Detail>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_CancelButton R_Conductor="@_conductorGeneralInfoRef"></R_CancelButton>
                <R_SaveButton R_Conductor="@_conductorGeneralInfoRef"></R_SaveButton>
            </R_ItemLayout>
        </R_StackLayout>

    </R_TabStripTab>
    <R_TabStripTab Title="@_localizer["_UnitType"]" Id="UnitType" Enabled="IsListExist">
        <R_TabPage R_Before_Open_TabPage="Before_Open_UnitType_TabPage" R_TabEventCallback="@R_TabEventCallback">
        </R_TabPage>
    </R_TabStripTab>
    <R_TabStripTab Title="@_localizer["_UnitView"]" Id="UnitView" Enabled="IsListExist">
        <R_TabPage R_Before_Open_TabPage="Before_Open_UnitView_TabPage" R_TabEventCallback="@R_TabEventCallback">
        </R_TabPage>
    </R_TabStripTab>
</R_TabStrip>



<R_PredefinedDock R_InstantiateDock="@PreDockOtherUnit_InstantiateDock"
                  R_AfterOpenPredefinedDock="@R_AfterOpenOtherUnitPredefinedDock"
                  Enabled="@IsListExist"
                  Title="@_localizer["_OtherUnit"]"></R_PredefinedDock>
                  
<R_PredefinedDock R_InstantiateDock="@PreDockUsers_InstantiateDock"
                  R_AfterOpenPredefinedDock="@R_AfterOpenUsersPredefinedDock"
                  Enabled="@IsListExist"
                  Title="@_localizer["_Users"]"></R_PredefinedDock>

<R_PredefinedDock R_InstantiateDock="@PreDockDepartment_InstantiateDock"
                  R_AfterOpenPredefinedDock="@R_AfterOpenDepartmentPredefinedDock"
                  Enabled="@IsListExist"
                  Title="@_localizer["_Department"]"></R_PredefinedDock>
                  

<R_Conductor @ref="@_conductorGeneralInfoRef"
             R_ViewModel="@loGeneralInfoViewModel"
             R_Display="Grid_DisplayGeneralInfo"
             R_AfterAdd="Grid_AfterAddGeneralInfo"@*
             R_BeforeEdit="Grid_BeforeEditGeneralInfo"*@
             R_SetEdit="Grid_SetEditGeneralInfo"
             R_BeforeCancel="Grid_BeforeCancelGeneralInfo"
             R_Saving="Grid_SavingGeneralInfo"
             R_Validation="Grid_ValidationGeneralInfo"
             R_ServiceSave="@Grid_ServiceSaveGeneralInfo"
             R_ServiceDelete="@Grid_ServiceDeleteGeneralInfo"
             R_AfterDelete="Grid_AfterDeleteGeneralInfo"
             R_SetOther="Grid_SetOtherGeneralInfo"
             R_IsHeader="true"
             R_ServiceGetRecord="@Grid_ServiceGetGeneralInfoRecord">
</R_Conductor>
