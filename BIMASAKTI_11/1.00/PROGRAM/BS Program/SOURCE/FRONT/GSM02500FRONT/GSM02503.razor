@inherits R_Page
@attribute [R_Page(Title = "Unit Type")]
@using GSM02500COMMON.DTOs.GSM02503
@using GSM02500MODEL


<R_StackLayout>
    <R_StackLayout Row>
        <R_ItemLayout col="2">
            <R_Label Class="fw-bold" FontSize="15">@_localizer["_Property"]</R_Label>
        </R_ItemLayout>

        <R_ItemLayout col="3">
            <R_TextBox @bind-Value="@loUnitTypeViewModel.SelectedProperty.CPROPERTY_ID"
                        R_ConductorSource="@_conductorUnitTypeRef"
                        Enabled="false">
            </R_TextBox>
        </R_ItemLayout>
        <R_ItemLayout col="7" Class="pe-3">
            <R_TextBox @bind-Value="@loUnitTypeViewModel.SelectedProperty.CPROPERTY_NAME"
                        R_ConductorSource="@_conductorUnitTypeRef"
                        Enabled="false">
            </R_TextBox>
        </R_ItemLayout>
    </R_StackLayout>
    <div hidden="@IsUnitTypeCategoryHidden">
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label Class="fw-bold" FontSize="15">@_localizer["_UnitTypeCategory"]</R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@loUnitTypeViewModel.SelectedUnitTypeCategory.CUNIT_TYPE_CATEGORY_ID"
                           R_ConductorSource="@_conductorUnitTypeRef"
                           OnLostFocus="OnLostFocusUnitTypeCategory"
                           MaxLength="20"
                           Enabled="true">
                </R_TextBox>
            </R_ItemLayout>
            <R_ItemLayout Style="20px">
                <R_Lookup R_ConductorSource="@_conductorUnitTypeRef"
                            R_After_Open_Lookup="R_After_Open_Lookup_UnitType_UnitTypeCategory"
                            R_Before_Open_Lookup="R_Before_Open_Lookup_UnitType_UnitTypeCategory">...</R_Lookup>
            </R_ItemLayout>
            <R_ItemLayout col="6">
                <R_TextBox @bind-Value="@loUnitTypeViewModel.SelectedUnitTypeCategory.CUNIT_TYPE_CATEGORY_NAME"
                            R_ConductorSource="@_conductorUnitTypeRef"
                            Enabled="false">
                </R_TextBox>
            </R_ItemLayout>
        </R_StackLayout>
    </div>
</R_StackLayout>

<R_TabStrip OnActiveTabIndexChanging="OnActiveTabIndexChanging">
    <R_TabStripTab Title="@_localizer["_UnitType"]" Id="UnitType">
        <R_StackLayout Spacing="3" Row="true">

            @* Lay-Out Table Grid List *@
            <R_ItemLayout col="3">
                <R_Grid @ref="@_gridUnitTypeRef"
                        DataSource="@loUnitTypeViewModel.loUnitTypeList"
                        R_ConductorSource="@_conductorUnitTypeRef"
                        R_GridType="@R_eGridType.Navigator"
                        Height="150px"
                        R_ServiceGetListRecord="@Grid_R_ServiceGetUnitTypeListRecord">
                    <R_GridColumns>
                        <R_GridTextColumn FieldName="@nameof(GSM02503UnitTypeDTO.CUNIT_TYPE_NAME)" HeaderText="@_localizer["_UnitType"]"></R_GridTextColumn>
                    </R_GridColumns>
                </R_Grid>
            </R_ItemLayout>


            @* Lay-Out Navigator *@
            <R_ItemLayout col="8">
                <R_StackLayout Row="true" Class="justify-content-end">
                    <R_ItemLayout>
                        <R_CheckBox @bind-Value="@loUnitTypeViewModel.Data.LACTIVE"
                                    R_ConductorSource="@_conductorUnitTypeRef"
                                    Enabled="false">
                        </R_CheckBox>
                        <R_Label>@_localizer["_Active"]</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>


                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_UnitType"]*</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="3">
                        <R_TextBox @bind-Value="@loUnitTypeViewModel.Data.CUNIT_TYPE_ID"
                                   @ref="@_unitTypeIdRef"
                                   R_ConductorSource="@_conductorUnitTypeRef"
                                   MaxLength="20"
                                    R_EnableAdd="true"
                                    R_EnableEdit="false">
                        </R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="7">
                        <R_TextBox @bind-Value="@loUnitTypeViewModel.Data.CUNIT_TYPE_NAME"
                                   @ref="@_unitTypeNameRef"
                                   R_ConductorSource="@_conductorUnitTypeRef"
                                   MaxLength="200"
                                    R_EnableAdd="true"
                                    R_EnableEdit="true">
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_Description"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="10">
                        <R_TextArea @bind-Value="@loUnitTypeViewModel.Data.CDESCRIPTION"
                                    R_ConductorSource="@_conductorUnitTypeRef"
                                    R_EnableAdd="true" R_EnableEdit="true"></R_TextArea>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_Label FontColor="R_eFontColor.Danger" FontSize="12">@_localizer["_DefaultSize"]</R_Label>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_GrossAreaSize"]*</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="3">
                        <R_NumericTextBox @bind-Value="@loUnitTypeViewModel.Data.NGROSS_AREA_SIZE"
                                            R_ConductorSource="@_conductorUnitTypeRef"
                                            R_EnableAdd="true"
                                            R_EnableEdit="true">
                        </R_NumericTextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="1">
                        <R_Label FontStyle="R_eFontStyle.Italic">@_localizer["_sqm"]</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_NetAreaSize"]*</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="3">
                        <R_NumericTextBox @bind-Value="@loUnitTypeViewModel.Data.NNET_AREA_SIZE"
                                            R_ConductorSource="@_conductorUnitTypeRef"
                                            R_EnableAdd="true"
                                            R_EnableEdit="true">
                        </R_NumericTextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="1">
                        <R_Label FontStyle="R_eFontStyle.Italic">@_localizer["_sqm"]</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_UpdatedBy"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_TextBox @bind-Value="@loUnitTypeViewModel.Data.CUPDATE_BY"
                                    R_ConductorSource="@_conductorUnitTypeRef"
                                    Enabled="false"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_Label>@_localizer["_Date"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_DateTimePicker @bind-Value="@loUnitTypeViewModel.Data.DUPDATE_DATE"
                                            R_ConductorSource="@_conductorUnitTypeRef"
                                            Enabled="false"></R_DateTimePicker>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>@_localizer["_CreatedBy"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_TextBox @bind-Value="@loUnitTypeViewModel.Data.CCREATE_BY"
                                   R_ConductorSource="@_conductorUnitTypeRef"
                                   Enabled="false"></R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_Label>@_localizer["_Date"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                    </R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_DateTimePicker @bind-Value="@loUnitTypeViewModel.Data.DCREATE_DATE"
                                          R_ConductorSource="@_conductorUnitTypeRef"
                                          Enabled="false"></R_DateTimePicker>
                    </R_ItemLayout>
                </R_StackLayout>


            </R_ItemLayout>


        </R_StackLayout>

        <R_StackLayout Row Class="justify-content-between">
            <R_ItemLayout>
                <R_AddButton R_Conductor="@_conductorUnitTypeRef"></R_AddButton>
                <R_EditButton R_Conductor="@_conductorUnitTypeRef"></R_EditButton>
                <R_DeleteButton R_Conductor="@_conductorUnitTypeRef"></R_DeleteButton>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_Button R_ConductorSource="@_conductorUnitTypeRef" R_EnableOther OnClick="OnClickTemplate">@_localizer["_Template"]</R_Button>
                <R_Popup R_ConductorSource="@_conductorUnitTypeRef" R_EnableOther R_Before_Open_Popup="Before_Open_Upload_Popup" R_After_Open_Popup="After_Open_Upload_Popup">@_localizer["_Upload"]</R_Popup>
                <R_Popup R_ConductorSource="@_conductorUnitTypeRef"
                         R_Before_Open_Popup="@R_Before_Open_Popup_ActivateInactiveUnitType"
                         R_After_Open_Popup="@R_After_Open_Popup_ActivateInactiveUnitType"
                         R_EnableOther>@loUnitTypeLabel</R_Popup>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_CancelButton R_Conductor="@_conductorUnitTypeRef"></R_CancelButton>
                <R_SaveButton R_Conductor="@_conductorUnitTypeRef"></R_SaveButton>
            </R_ItemLayout>
        </R_StackLayout>
    </R_TabStripTab>
    <R_TabStripTab Title="@_localizer["_Image"]" Id="Image" Enabled="@IsUnitTypeListExist">
        <R_TabPage R_Before_Open_TabPage="Before_Open_Image_TabPage" R_After_Open_TabPage="After_Open_Image_TabPage">
            <GSM02503Image></GSM02503Image>
        </R_TabPage>
    </R_TabStripTab>

</R_TabStrip>

<R_Conductor @ref="@_conductorUnitTypeRef"
             R_ViewModel="@loUnitTypeViewModel"
             R_Display="Grid_DisplayUnitType"
             R_Saving="Grid_SavingUnitType"
             R_ServiceSave="@Grid_ServiceSaveUnitType"
             R_BeforeAdd="Grid_BeforeAddUnitType"
             R_AfterAdd="Grid_AfterAddUnitType"
             R_Validation="Grid_ValidationUnitType"@*
             R_BeforeEdit="Grid_BeforeEditUnitType"*@
             R_SetEdit="Grid_SetEditUnitType"
             R_SetOther="UnitType_SetOther"
             R_BeforeCancel="Grid_BeforeCancelUnitType"
             R_ServiceDelete="@Grid_ServiceDeleteUnitType"
             R_AfterDelete="Grid_AfterDeleteUnitType"
              R_IsHeader
             R_ServiceGetRecord="@Grid_ServiceGetUnitTypeRecord">
</R_Conductor>
