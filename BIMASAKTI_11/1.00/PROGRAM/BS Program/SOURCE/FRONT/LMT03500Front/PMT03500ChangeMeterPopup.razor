@page "/PMT03500ChangeMeterPopup"

@using PMT03500FrontResources
@using R_BlazorFrontEnd.Interfaces
@using PMT03500Common.DTOs
@inherits R_Page
@attribute [R_Page(Title = "Change Meter No")];
@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout Style="width: 850px">
    <R_ItemLayout>
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["LBL_AGREEMENTNO"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="_viewModel.Entity.CREF_NO" Enabled="false"/>
            </R_ItemLayout>
            <R_ItemLayout col="1" Class="ms-5">
                <R_Label>@_localizer["LBL_UNITID"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="_viewModel.Entity.CUNIT_ID" Enabled="false"/>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="_viewModel.Entity.CUNIT_NAME" Enabled="false"/>
            </R_ItemLayout>
        </R_StackLayout>
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["LBL_AGREEMENTUNITS"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="_viewModel.Entity.CAGREEMENT_UNIT_LIST" Enabled="false"/>
            </R_ItemLayout>
            <R_ItemLayout col="1" Class="ms-5">
                <R_Label>@_localizer["LBL_TENANT"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="_viewModel.Entity.CTENANT_ID" Enabled="false"/>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="_viewModel.Entity.CTENANT_NAME" Enabled="false"/>
            </R_ItemLayout>
        </R_StackLayout>
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["LBL_UTILITYTYPE"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="_viewModel.Entity.CUTILITY_TYPE_DESCR" Enabled="false"/>
            </R_ItemLayout>     
        </R_StackLayout>
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["LBL_FROMMETERNO"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="_viewModel.Entity.CMETER_NO" Enabled="false"/>
            </R_ItemLayout>
            <R_ItemLayout col="2" Class="@(_viewModel.DisplayWG + " ms-5")">
                <R_Label>@_localizer["LBL_METEREND"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3" Class="@(_viewModel.DisplayWG)">
                <R_NumericTextBox @bind-Value="_viewModel.Entity.NMETER_END" Enabled Min="0"/>
            </R_ItemLayout> 
            <R_ItemLayout col="2" Class="@(_viewModel.DisplayEC + " ms-5")">
                <R_Label>@_localizer["LBL_BLOCK1END"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3" Class="@(_viewModel.DisplayEC)">
                <R_NumericTextBox @bind-Value="_viewModel.Entity.NBLOCK1_END" Enabled Min="0"/>
            </R_ItemLayout> 
        </R_StackLayout>
        <R_StackLayout Class="@(_viewModel.DisplayEC)">
            <R_ItemLayout col="2"/>
            <R_ItemLayout col="3"/>
            <R_ItemLayout col="2" Class="@(_viewModel.DisplayEC + " ms-5")">
                <R_Label>@_localizer["LBL_BLOCK2END"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3" Class="@(_viewModel.DisplayEC)">
                <R_NumericTextBox @bind-Value="_viewModel.Entity.NBLOCK2_END" Enabled Min="0"/>
            </R_ItemLayout> 
        </R_StackLayout>
        
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["LBL_TOMETERNO"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                @* <R_TextBox @bind-Value="_viewModel.Entity.CTO_METER_NO" Enabled/> *@
                <R_ComboBox Data="@_viewModel.MeterNoList"
                            @bind-Value="_viewModel.Entity.CTO_METER_NO"
                            ValueField="@nameof(PMT03500MeterNoDTO.CMETER_NO)"
                            TextField="@nameof(PMT03500MeterNoDTO.CMETER_NO)"
                            Enabled/>
            </R_ItemLayout>
            <R_ItemLayout col="2" Class="@(_viewModel.DisplayWG + " ms-5")">
                <R_Label>@_localizer["LBL_METERSTART"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3" Class="@(_viewModel.DisplayWG)">
                <R_NumericTextBox @bind-Value="_viewModel.Entity.NMETER_START" Enabled Min="0"/>
            </R_ItemLayout>
            <R_ItemLayout col="2" Class="@(_viewModel.DisplayEC + " ms-5")">
                <R_Label>@_localizer["LBL_BLOCK1START"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3" Class="@(_viewModel.DisplayEC)">
                <R_NumericTextBox @bind-Value="_viewModel.Entity.NTO_BLOCK1_START" Enabled="true" Min="0"/>
            </R_ItemLayout>
        </R_StackLayout>
        
        <R_StackLayout Row Class="@(_viewModel.DisplayEC)">
            <R_ItemLayout col="2"/>
            <R_ItemLayout col="3"/>
            <R_ItemLayout col="2" Class="@(_viewModel.DisplayEC + " ms-5")">
                <R_Label>@_localizer["LBL_BLOCK2START"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3" Class="@(_viewModel.DisplayEC)">
                <R_NumericTextBox @bind-Value="_viewModel.Entity.NTO_BLOCK2_START" Enabled="true" Min="0"/>
            </R_ItemLayout>
        </R_StackLayout>
        
        <R_StackLayout Row>
            <R_ItemLayout col="2">
                <R_Label>@_localizer["LBL_STARTINVPRD"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_StackLayout Row>
                    <R_ItemLayout col="6">
                        <R_ComboBox Data="@_viewModel.StartInvYearList"
                                    @bind-Value="_viewModel.CSTART_INV_PRD_YEAR"
                                    ValueField="@nameof(PMT03500YearDTO.CYEAR)"
                                    TextField="@nameof(PMT03500YearDTO.CYEAR)"
                                    Enabled/>
                    </R_ItemLayout>
                    <R_ItemLayout col="5" Class="pe-1">
                        <R_ComboBox Data="@_viewModel.StartInvMonthList"
                                    @bind-Value="_viewModel.CSTART_INV_PRD_MONTH"
                                    ValueField="@nameof(PMT03500PeriodDTO.CPERIOD_NO)"
                                    TextField="@nameof(PMT03500PeriodDTO.CPERIOD_NO)"
                                    Enabled/>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>
            <R_ItemLayout col="2" Class="ms-5">
                <R_Label>@_localizer["LBL_STARTDATE"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                @* <R_TextBox @bind-Value="_viewModel.Entity.CSTART_DATE" Enabled/> *@
                <R_DatePicker @bind-Value="_viewModel.Entity.DSTART_DATE_CHANGE"/>
            </R_ItemLayout> 
        </R_StackLayout>
        
        <R_StackLayout Row Class="justify-content-end mt-5">
                <R_Button OnClick="OnClickCancel">@_localizer["LBL_CANCEL"]</R_Button>
                <R_Button OnClick="OnClickSave">@_localizer["LBL_SAVE"]</R_Button>
        </R_StackLayout>
    </R_ItemLayout>
</R_StackLayout>