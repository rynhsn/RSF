@page "/APR00300"
@using APR00300Common.DTOs
@using APR00300FrontResources
@using R_BlazorFrontEnd.Controls.DataControls
@inherits R_Page
@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout Row Class="mb-1">
    <R_ItemLayout Class="me-1">
        <R_Label>@_localizer["PROPERTY"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="3">
        <R_ComboBox @ref="_comboPropertyRef" 
                    Data="@_viewModel.PropertyList"
                    @bind-Value="@_viewModel.ReportParam.CPROPERTY_ID"
                    ValueField="@nameof(APR00300PropertyDTO.CPROPERTY_ID)"
                    TextField="@nameof(APR00300PropertyDTO.CPROPERTY_NAME)"
                    Enabled
                    OnLostFocused="OnLostFocusProperty"/>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Class="border-top my-3"/>

<R_StackLayout Row>
    <R_ItemLayout col="7">
        <R_StackLayout>
            <R_ItemLayout>
                <R_StackLayout>
                    <R_ItemLayout>
                        <R_Label Class="text-danger fw-bold">@_localizer["Supplier"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout Class="ms-4">
                        <R_StackLayout Row>
                            <R_ItemLayout col="2">
                                <R_Label>@_localizer["From"]</R_Label>
                            </R_ItemLayout>
                            <R_ItemLayout col="4">
                                <R_TextBox @bind-Value="_viewModel.ReportParam.CFROM_SUPPLIER_ID" OnLostFocus="OnLostFocusFromSupplier" Enabled/>
                            </R_ItemLayout>
                            <R_ItemLayout>
                                <R_Lookup R_Before_Open_Lookup="BeforeLookupFromSupplier" R_After_Open_Lookup="AfterLookupFromSupplier" Enabled>...</R_Lookup>
                            </R_ItemLayout>
                            <R_ItemLayout col="5">
                                <R_TextBox @bind-Value="_viewModel.ReportParam.CFROM_SUPPLIER_NAME" Enabled="false"/>
                            </R_ItemLayout>
                        </R_StackLayout>
                        <R_StackLayout Row>
                            <R_ItemLayout col="2">
                                <R_Label>@_localizer["To"]</R_Label>
                            </R_ItemLayout>
                            <R_ItemLayout col="4">
                                <R_TextBox @bind-Value="_viewModel.ReportParam.CTO_SUPPLIER_ID" OnLostFocus="OnLostFocusToSupplier" Enabled/>
                            </R_ItemLayout>
                            <R_ItemLayout>
                                <R_Lookup R_Before_Open_Lookup="BeforeLookupToSupplier" R_After_Open_Lookup="AfterLookupToSupplier" Enabled>...</R_Lookup>
                            </R_ItemLayout>
                            <R_ItemLayout col="5">
                                <R_TextBox @bind-Value="_viewModel.ReportParam.CTO_SUPPLIER_NAME" Enabled="false"/>
                            </R_ItemLayout>
                        </R_StackLayout>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_StackLayout>
                    <R_ItemLayout>
                        <R_Label Class="text-danger fw-bold">@_localizer["DateBasedOn"]</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout Class="ms-4">
                        <R_StackLayout Row>
                            <R_ItemLayout col="2">
                                <R_RadioGroup Data="@_viewModel.DateBasedOnCutOff"
                                              @bind-Value="_viewModel.ReportParam.CDATE_BASED_ON"
                                              ValueField="Key"
                                              TextField="Value"
                                              Enabled/>
                            </R_ItemLayout>
                            <R_ItemLayout col="4">
                                <R_DatePicker @bind-Value="_viewModel.ReportParam.DCUT_OFF_DATE"
                                              Enabled="@(_viewModel.ReportParam.CDATE_BASED_ON == "C")"/>
                            </R_ItemLayout>
                        </R_StackLayout>
                        <R_StackLayout>
                            <R_ItemLayout>
                                <R_RadioGroup Data="@_viewModel.DateBasedOnPeriod"
                                              @bind-Value="_viewModel.ReportParam.CDATE_BASED_ON"
                                              ValueField="Key"
                                              TextField="Value"
                                              Enabled/>
                            </R_ItemLayout>
                            <R_ItemLayout Class="ms-4">
                                <R_StackLayout Row>
                                    <R_ItemLayout col="2">
                                        <R_Label>@_localizer["From"]</R_Label>
                                    </R_ItemLayout>
                                    <R_ItemLayout col="2">
                                        <R_NumericTextBox @bind-Value="_viewModel.ReportParam.IFROM_YEAR"
                                                          Min="@_viewModel.YearRange.IMIN_YEAR"
                                                          Max="@_viewModel.YearRange.IMAX_YEAR"
                                                          ThousandSeparator="false"
                                                          Enabled="@(_viewModel.ReportParam.CDATE_BASED_ON == "P")"/>
                                    </R_ItemLayout>
                                    <R_ItemLayout col="3">
                                        <R_DropDownList Data="@_viewModel.PeriodList"
                                                        @bind-Value="_viewModel.ReportParam.CFROM_MONTH"
                                                        ValueField="Key"
                                                        TextField="Value"
                                                        Enabled="@(_viewModel.ReportParam.CDATE_BASED_ON == "P")"/>
                                    </R_ItemLayout>
                                </R_StackLayout>
                                <R_StackLayout Row>
                                    <R_ItemLayout col="2">
                                        <R_Label>@_localizer["To"]</R_Label>
                                    </R_ItemLayout>
                                    <R_ItemLayout col="2">
                                        <R_NumericTextBox @bind-Value="_viewModel.ReportParam.ITO_YEAR"
                                                          Min="@_viewModel.YearRange.IMIN_YEAR"
                                                          Max="@_viewModel.YearRange.IMAX_YEAR"
                                                          ThousandSeparator="false"
                                                          Enabled="@(_viewModel.ReportParam.CDATE_BASED_ON == "P")"/>
                                    </R_ItemLayout>
                                    <R_ItemLayout col="3">
                                        <R_DropDownList Data="@_viewModel.PeriodList"
                                                        @bind-Value="_viewModel.ReportParam.CTO_MONTH"
                                                        ValueField="Key"
                                                        TextField="Value"
                                                        Enabled="@(_viewModel.ReportParam.CDATE_BASED_ON == "P")"/>
                                    </R_ItemLayout>
                                </R_StackLayout>
                            </R_ItemLayout>
                        </R_StackLayout>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>
        </R_StackLayout>
    </R_ItemLayout>
    <R_ItemLayout Class="border-start mx-3"/>
    <R_ItemLayout col="4">
        <R_StackLayout>
            <R_ItemLayout>
                <R_Label Class="text-danger fw-bold">@_localizer["StatementDate"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="7" Class="ms-4">
                <R_DatePicker @bind-Value="_viewModel.ReportParam.DSTATEMENT_DATE" Enabled/>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Class="border-top my-3"/>

        <R_StackLayout>
            <R_ItemLayout>
                <R_Label Class="text-danger fw-bold">@_localizer["Filter"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout Class="ms-4">
                <R_StackLayout Row>
                    <R_ItemLayout>
                        <R_CheckBox @bind-Value="_viewModel.ReportParam.LINCLUDE_ZERO_BALANCE" Enabled/>
                    </R_ItemLayout>
                    <R_ItemLayout>
                        <R_Label>@_localizer["IncludeZeroBalance"]</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>
                <R_StackLayout Row>
                    <R_ItemLayout>
                        <R_CheckBox @bind-Value="_viewModel.ReportParam.LSHOW_AGE_TOTAL" Enabled/>
                    </R_ItemLayout>
                    <R_ItemLayout>
                        <R_Label>@_localizer["ShowAgeTotal"]</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>
        </R_StackLayout>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Class="border-top my-3"/>

<R_StackLayout Row>
    <R_ItemLayout>
        <R_PrintButton OnClick="OnClickPrint">@_localizer["Print"]</R_PrintButton>
    </R_ItemLayout>
    <R_ItemLayout>
        <R_Popup R_Before_Open_Popup="BeforeOpenPopupSaveAs">@_localizer["SaveAs"]</R_Popup>
    </R_ItemLayout>
</R_StackLayout>