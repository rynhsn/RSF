@page "/ICR00100"

@using ICR00100Common.DTOs
@using ICR00100FrontResources
@inherits R_Page

@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout>
    <R_ItemLayout>
        @* <R_GroupBox Class="p-2" Enabled ShowBorder="true" Title="@_localizer["PrintMode"]"> *@
        <R_StackLayout Row>
            <R_ItemLayout col="1">
                <R_Label>@_localizer["Property"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_ComboBox Value="@_viewModel.ReportParam.CPROPERTY_ID"
                            Data="@_viewModel.PropertyList"
                            TextField="@nameof(ICR00100PropertyDTO.CPROPERTY_NAME)"
                            ValueField="@nameof(ICR00100PropertyDTO.CPROPERTY_ID)"
                            ValueChanged="@((string value) => ValueChangedProperty(value))"
                />
            </R_ItemLayout>
            <R_ItemLayout>
                <R_CheckBox @bind-Value="_viewModel.ReportParam.LINC_FUTURE_TRANSACTION"
                            Enabled/>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_Label>@_localizer["IncludeFutureTransactions"]</R_Label>
            </R_ItemLayout>

        </R_StackLayout>
        <R_StackLayout Row Class="mt-1">
            <R_ItemLayout col="1">
                <R_RadioGroup Data="@_viewModel.PrintPeriodMode"
                              Value="@_viewModel.ReportParam.CDATE_FILTER"
                              ValueField="Key"
                              TextField="Value"
                              ValueChanged="@((string value) => ValueChangedDateMode(value))"
                              Enabled/>
            </R_ItemLayout>
            <R_ItemLayout col="1">
                <R_NumericTextBox @bind-Value="@_viewModel.ReportParam.IPERIOD_YEAR"
                                  Step="1"
                                  Min="@_viewModel.PeriodYearRange.IMIN_YEAR"
                                  Max="@_viewModel.PeriodYearRange.IMAX_YEAR"
                                  Enabled="@(_viewModel.ReportParam.CDATE_FILTER == _localizer["PERIOD"])"
                                  ThousandSeparator="false"/>
            </R_ItemLayout>
            <R_ItemLayout col="1" Class="pe-1">
                <R_DropDownList Data="@_viewModel.PeriodList"
                                @bind-Value="_viewModel.ReportParam.CPERIOD_MONTH"
                                ValueField="Key"
                                TextField="Value"
                                Enabled="@(_viewModel.ReportParam.CDATE_FILTER == _localizer["PERIOD"])"/>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Row Class="mt-1">
            <R_ItemLayout col="1">
                <R_RadioGroup Data="@_viewModel.PrintDateMode"
                              Value="@_viewModel.ReportParam.CDATE_FILTER"
                              ValueField="Key"
                              TextField="Value"
                              ValueChanged="@((string value) => ValueChangedDateMode(value))"
                              Enabled/>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_DatePicker @bind-Value="@_viewModel.ReportParam.DFROM_DATE"
                              Enabled="@(_viewModel.ReportParam.CDATE_FILTER == _localizer["DATE"])"/>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_Label>@_localizer["To"]</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_DatePicker @bind-Value="@_viewModel.ReportParam.DTO_DATE"
                              Enabled="@(_viewModel.ReportParam.CDATE_FILTER == _localizer["DATE"])"/>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Row Class="mt-1">
            <R_ItemLayout col="1">
                <R_Label>@_localizer["Warehouse"]*</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="@_viewModel.ReportParam.CWAREHOUSE_CODE"
                           OnLostFocus="@OnLostFocusWarehouse"/>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_Lookup R_Before_Open_Lookup="@BeforeOpenLookupWarehouse"
                          R_After_Open_Lookup="@AfterOpenLookupWarehouse">
                    ...
                </R_Lookup>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@_viewModel.ReportParam.CWAREHOUSE_NAME"
                           Enabled="false"/>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Row Class="mt-1">
            <R_ItemLayout col="1">
                <R_StackLayout Row>
                    @* <R_ItemLayout> *@
                    @*     <R_CheckBox @bind-Value="_viewModel.ReportParam.LDEPARTMENT" *@
                    @*                 Enabled/> *@
                    @* </R_ItemLayout> *@
                    <R_ItemLayout>
                        <R_Label>@_localizer["Department"]</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>

            <R_ItemLayout col="2">
                <R_TextBox @bind-Value="@_viewModel.ReportParam.CDEPT_CODE"
                           OnLostFocus="@OnLostFocusDept"/>
            </R_ItemLayout>

            <R_ItemLayout>
                <R_Lookup R_Before_Open_Lookup="@BeforeOpenLookupDept"
                          R_After_Open_Lookup="@AfterOpenLookupDept">
                    ...
                </R_Lookup>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@_viewModel.ReportParam.CDEPT_NAME"
                           Enabled="false"/>
            </R_ItemLayout>
        </R_StackLayout>

        @* <R_StackLayout Row Class="mt-1"> *@
            @* <R_ItemLayout col="1"> *@
            @*     <R_Label>@_localizer["SupressMode"]</R_Label> *@
            @* </R_ItemLayout> *@
            @* <R_ItemLayout col="4"> *@
            @*     <R_DropDownList Data="@_viewModel.SupressMode" *@
            @*                     @bind-Value="_viewModel.ReportParam.CSUPRESS_MODE" *@
            @*                     ValueField="Key" *@
            @*                     TextField="Value" *@
            @*                     Enabled/> *@
            @* </R_ItemLayout> *@
        @* </R_StackLayout> *@
        @* </R_GroupBox> *@
    </R_ItemLayout>

    <R_ItemLayout>
        <R_GroupBox Class="p-2" Enabled ShowBorder="true" Title="@_localizer["FilterBy"]">
            <R_StackLayout Row>
                <R_ItemLayout col="1">
                    <R_RadioGroup Data="@_viewModel.FilterByProduct"
                                  Value="@_viewModel.ReportParam.CFILTER_BY"
                                  ValueField="Key"
                                  TextField="Value"
                                  Enabled
                                  ValueChanged="@((string value) => ValueChangedFilter(value))"/>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CFROM_PROD_ID"
                               OnLostFocus="@OnLostFocusFromProduct"
                               Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["PROD"])"/>
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_Before_Open_Lookup="@BeforeOpenLookupFromProduct"
                              R_After_Open_Lookup="@AfterOpenLookupFromProduct"
                              Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["PROD"])">
                        ...
                    </R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="3">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CFROM_PROD_NAME"
                               Enabled="false"/>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="1"/>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CTO_PROD_ID"
                               OnLostFocus="@OnLostFocusToProduct"
                               Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["PROD"])"/>
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_Before_Open_Lookup="@BeforeOpenLookupToProduct"
                              R_After_Open_Lookup="@AfterOpenLookupToProduct"
                              Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["PROD"])">
                        ...
                    </R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="3">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CTO_PROD_NAME"
                               Enabled="false"/>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="1">
                    <R_RadioGroup Data="@_viewModel.FilterByCategory"
                                  Value="@_viewModel.ReportParam.CFILTER_BY"
                                  ValueField="Key"
                                  TextField="Value"
                                  Enabled
                                  ValueChanged="@((string value) => ValueChangedFilter(value))"/>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CFILTER_DATA_CATEGORY"
                               OnLostFocus="@OnLostFocusCategoryProduct"
                               Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["CATEGORY"])"/>
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_Before_Open_Lookup="@BeforeOpenLookupCategoryProduct"
                              R_After_Open_Lookup="@AfterOpenLookupCategoryProduct"
                              Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["CATEGORY"])">
                        ...
                    </R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="3">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CFILTER_DATA_CATEGORY_NAME"
                               Enabled="false"/>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="1">
                    <R_RadioGroup Data="@_viewModel.FilterByJournalGroup"
                                  Value="@_viewModel.ReportParam.CFILTER_BY"
                                  ValueField="Key"
                                  TextField="Value"
                                  Enabled
                                  ValueChanged="@((string value) => ValueChangedFilter(value))"/>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CFILTER_DATA_JOURNAL"
                               OnLostFocus="@OnLostFocusJournalGroup"
                               Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["JOURNAL"])"/>
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Lookup R_Before_Open_Lookup="@BeforeOpenLookupJournalGroup"
                              R_After_Open_Lookup="@AfterOpenLookupJournalGroup"
                              Enabled="@(_viewModel.ReportParam.CFILTER_BY == _localizer["JOURNAL"])">
                        ...
                    </R_Lookup>
                </R_ItemLayout>
                <R_ItemLayout col="3">
                    <R_TextBox @bind-Value="@_viewModel.ReportParam.CFILTER_DATA_JOURNAL_NAME"
                               Enabled="false"/>
                </R_ItemLayout>
            </R_StackLayout>
        </R_GroupBox>
    </R_ItemLayout>

    <R_ItemLayout>
        <R_StackLayout Row>
            <R_ItemLayout col="6">
                <R_GroupBox Class="p-2" Enabled ShowBorder="true" Title="@_localizer["OptionPrint"]">
                    <R_StackLayout Row>
                        <R_ItemLayout>
                            <R_RadioGroup Data="@_viewModel.PrintOption"
                                          @bind-Value="@_viewModel.ReportParam.COPTION_PRINT"
                                          ValueField="Key"
                                          TextField="Value"
                                          Enabled
                                          Layout="R_eRadioGroupLayout.Vertical"/>
                        </R_ItemLayout>
                    </R_StackLayout>
                </R_GroupBox>
            </R_ItemLayout>

            <R_ItemLayout col="6">
                <R_GroupBox Class="p-2" Enabled ShowBorder="true">
                    <R_StackLayout Row>
                        <R_ItemLayout>
                            <R_CheckBox @bind-Value="@_viewModel.ReportParam.LINC_RV_AND_GR_REPLACEMENT" Enabled/>
                        </R_ItemLayout>
                        <R_ItemLayout>
                            <R_Label>@_localizer["IncludeRVAndGRReplacement"]</R_Label>
                        </R_ItemLayout>
                    </R_StackLayout>

                    <R_StackLayout Row>
                        <R_ItemLayout>
                            <R_CheckBox @bind-Value="@_viewModel.ReportParam.LINC_TRANS_DESC" Enabled/>
                        </R_ItemLayout>
                        <R_ItemLayout>
                            <R_Label>@_localizer["IncludeTransactionDescription"]</R_Label>
                        </R_ItemLayout>
                    </R_StackLayout>

                    <R_StackLayout Row>
                        <R_ItemLayout>
                            <R_CheckBox @bind-Value="@_viewModel.ReportParam.LSUPRESS_TOTAL_QTY" Enabled/>
                        </R_ItemLayout>
                        <R_ItemLayout>
                            <R_Label>@_localizer["SupressTotalQuantity"]</R_Label>
                        </R_ItemLayout>
                    </R_StackLayout>
                </R_GroupBox>
            </R_ItemLayout>
        </R_StackLayout>
    </R_ItemLayout>

    <R_ItemLayout>
        <R_StackLayout Row>
            <R_ItemLayout>
                <R_PrintButton OnClick="OnClickPrint">@_localizer["Print"]</R_PrintButton>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_Lookup R_Before_Open_Lookup="BeforeOpenPopupSaveAs">@_localizer["SaveAs"]</R_Lookup>
            </R_ItemLayout>
        </R_StackLayout>
    </R_ItemLayout>
</R_StackLayout>