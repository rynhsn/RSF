@inherits R_Page
@attribute [R_Page(Title = "Schedule")]
@using PMT02100COMMON.DTOs
@using PMT02100COMMON.DTOs.PMT02100;

<R_StackLayout Style="width:1000px">
    <R_StackLayout Row>
        <R_ItemLayout col="2">
            <R_Label>@_localizer["_HODateAndTime"]*</R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="3">
            <R_DateTimePicker R_ConductorGridSource="_conductorGridRef"
                              Enabled
                              DateTimePickerFormat="R_eDateTimePickerFormat.Short"
                              Min="@(DateTime.Today.AddDays(1))"
                              @bind-Value="loViewModel.loScheduleHeader.DSCHEDULED_DATE">
            </R_DateTimePicker>
        </R_ItemLayout>
    </R_StackLayout>
@*
    <R_StackLayout Row>
        <R_ItemLayout col="2">
            <R_Label>@_localizer["_HOTime"]*</R_Label>
        </R_ItemLayout>
        <R_ItemLayout col="1">
            <R_NumericTextBox R_ConductorGridSource="_conductorGridRef"
                              Enabled
                              Min="0"
                              Max="23"
                              @bind-Value="loViewModel.loScheduleHeader.ISCHEDULED_TIME_HOURS">
            </R_NumericTextBox>
        </R_ItemLayout>
        <R_ItemLayout col="1">
            <R_NumericTextBox R_ConductorGridSource="_conductorGridRef"
                              Enabled
                              Min="0"
                              Max="59"
                              @bind-Value="loViewModel.loScheduleHeader.ISCHEDULED_TIME_MINUTES">
            </R_NumericTextBox>
        </R_ItemLayout>
    </R_StackLayout>
*@
    <R_StackLayout Row>
        <R_ItemLayout col="12">
            <R_Grid @ref="@_gridRef"
                    DataSource="@loViewModel.loHandoverList"
                    Pageable="true"
                    R_ConductorGridSource="@_conductorGridRef"
                    R_GridType="@R_eGridType.Batch"
                    AllowAddNewRow="false"
                    AllowEditRow="false"
                    AllowDeleteRow="false"
                    Height="400px"
                    R_ServiceGetListRecord="@Grid_R_ServiceGetListRecord">
                <R_GridColumns>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CUNIT_TYPE_CATEGORY_ID) HeaderText="@_localizer["_UnitTypeCategory"]" Width="200px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CUNIT_ID) HeaderText="@_localizer["_UnitId"]" Width="150px"></R_GridTextColumn>
                    <R_GridDatePickerColumn FieldName=@nameof(PMT02100HandoverDTO.DHO_PLAN_DATE) HeaderText="@_localizer["_PlanHODate"]" Width="150px"></R_GridDatePickerColumn>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_DISPLAY) HeaderText="@_localizer["_Tenant"]" Width="200px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_PHONE_NO) HeaderText="@_localizer["_PhoneNo"]" Width="150px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_EMAIL) HeaderText="@_localizer["_EmailAddress"]" Width="200px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_CITY_DESCRIPTION) HeaderText="@_localizer["_City"]" Width="250px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CDEPT_CODE) HeaderText="@_localizer["_Department"]" Width="150px"></R_GridTextColumn>
                    <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CREF_NO) HeaderText="@_localizer["_RefNo"]" Width="200px"></R_GridTextColumn>
                    <R_GridDatePickerColumn FieldName=@nameof(PMT02100HandoverDTO.DREF_DATE) HeaderText="@_localizer["_RefDate"]" Width="150px"></R_GridDatePickerColumn>
                </R_GridColumns>
            </R_Grid>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout Row>
        <R_ItemLayout col="12">
            <R_StackLayout Row Class="justify-content-end">
                <R_ItemLayout>
                    <R_Button OnClick="OnCancel">
                        @_localizer["_Cancel"]
                    </R_Button>
                    <R_Button OnClick="@OnSchedule" Enabled=@(_gridRef.DataSource.Count > 0)>
                        @_localizer["_Schedule"]
                    </R_Button>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
    </R_StackLayout>
</R_StackLayout>

<R_ConductorGrid @ref="@_conductorGridRef"
                 R_ViewModel="@loViewModel"
                 R_IsHeader>
</R_ConductorGrid>