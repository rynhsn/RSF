@attribute [R_Page(ResourceId = "_Account")]
@using PMT02100COMMON.DTOs.PMT02120;
@inherits R_Page
@inject R_ILocalizer<PMT02100FrontResources.Resources_Dummy_Class> _localizer

<R_StackLayout Style="width: 1100px">
    <R_StackLayout Row>
        <R_ItemLayout col="6">
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_ConfirmedHODate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_DatePicker R_ConductorGridSource="_unassignedConductorRef"
                                  Enabled="false"
                                  @bind-Value="loViewModel.loHandover.DSCHEDULED_HO_DATE">
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_Department"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CDEPT_CODE">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_ConfirmedHODate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CREF_NO">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_ConfirmedHODate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_DatePicker R_ConductorGridSource="_unassignedConductorRef"
                                  Enabled="false"
                                  ShowPickerButton="false"
                                  @bind-Value="loViewModel.loHandover.DREF_DATE">
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
        <R_ItemLayout col="6">
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_Property"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="3">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CPROPERTY_ID">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="5">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CPROPERTY_NAME">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_Building"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="3">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CBUILDING_ID">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="5">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CBUILDING_NAME">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_UnitTypeCategory"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="3">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CUNIT_TYPE_CATEGORY_ID">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="5">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CUNIT_TYPE_CATEGORY_NAME">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>@_localizer["_Unit"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="8">
                    <R_TextBox R_ConductorGridSource="_unassignedConductorRef"
                               Enabled="false"
                               @bind-Value="loViewModel.loHandover.CUNIT_ID">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
    </R_StackLayout>
    <R_StackLayout Row>
        <R_ItemLayout Style="width: 47.5%">
            <R_GroupBox Title="@_localizer["_ListOfEmployee"]" TitleClass="text-center mb-2 mt-2">
                <R_Grid @ref="@_unassignedGridRef"
                        DataSource="@loViewModel.loUnassignedEmployeeList"
                        R_GridType="@R_eGridType.Batch"
                        R_ServiceGetListRecord="@Unassigned_Employee_ServiceGetListRecord"
                        R_ConductorGridSource="@_unassignedConductorRef"
                        DragClueField="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_NAME)"
                        DragDrop
                        AllowAddNewRow="false"
                        AllowEditRow
                        AllowDeleteRow
                        TargetGridDrop="@_assignedGridRef"
                        Pageable="true"
                        R_ServiceGetRecord="@R_ServiceGetRecord"
                        R_GridDragDropBeforeDrop="@((R_GridDragDropBeforeDropEventArgs<PMT02120EmployeeListDTO> args) => R_Source_GridRowBeforeDrop(args))"
                        R_GridDragDropAfterDrop="@((R_GridDragDropAfterDropEventArgs<PMT02120EmployeeListDTO> args) => R_Source_GridRowAfterDrop(args))"
                        Height="250px">
                    <R_GridColumns>
                        <R_GridTextColumn FieldName="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_ID)" HeaderText="@_localizer["_EmployeeId"]" Width="125px"></R_GridTextColumn>
                        <R_GridTextColumn FieldName="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_NAME)" HeaderText="@_localizer["_EmployeeName"]" Width="150px"></R_GridTextColumn>
                        <R_GridTextColumn FieldName="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_TYPE)" HeaderText="@_localizer["_EmployeeType"]" Width="150px"></R_GridTextColumn>
                    </R_GridColumns>
                </R_Grid>
            </R_GroupBox>
        </R_ItemLayout>
        <R_ItemLayout  Style="width: 5%">
            @*Spasing*@
            <R_StackLayout Row><R_ItemLayout col="12"><R_Label>  </R_Label></R_ItemLayout></R_StackLayout>
            <R_StackLayout Row><R_ItemLayout col="12"><R_Label>  </R_Label></R_ItemLayout></R_StackLayout>
            <R_StackLayout Row><R_ItemLayout col="12"><R_Label>  </R_Label></R_ItemLayout></R_StackLayout>
            <R_StackLayout Row><R_ItemLayout col="12"><R_Label>  </R_Label></R_ItemLayout></R_StackLayout>
            <R_StackLayout Row><R_ItemLayout col="12"><R_Label>  </R_Label></R_ItemLayout></R_StackLayout>

            <R_StackLayout Row Class="justify-content-center">
                <R_ItemLayout col="10" Class="d-grid gap-2">
                    <R_Button R_ConductorGridSource="@_unassignedConductorRef" OnClick="@Allocation_BtnAllMoveRight">>></R_Button>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row Class="justify-content-center">
                <R_ItemLayout col="10" Class="d-grid gap-2">
                    <R_Button R_ConductorGridSource="@_unassignedConductorRef" OnClick="@Allocation_BtnMoveRight">></R_Button>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row><R_ItemLayout><R_Label></R_Label></R_ItemLayout></R_StackLayout>
            <R_StackLayout Row Class="justify-content-center">
                <R_ItemLayout col="10" Class="d-grid gap-2">
                    <R_Button R_ConductorGridSource="@_assignedConductorRef" OnClick="@Allocation_BtnMoveLeft">@label2</R_Button>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row Class="justify-content-center">
                <R_ItemLayout col="10" Class="d-grid gap-2">
                    <R_Button R_ConductorGridSource="@_assignedConductorRef" OnClick="@Allocation_BtnAllMoveLeft">@label1</R_Button>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
            <R_ItemLayout Style="width: 47.5%">
            <R_GroupBox Title="@_localizer["_AssignedEmployee"]" TitleClass="text-center mb-2 mt-2">
                <R_Grid @ref="@_assignedGridRef"
                        DataSource="@loViewModel.loAssignedEmployeeList"
                        R_GridType="@R_eGridType.Batch"
                        R_ServiceGetListRecord="@AssigenedEmployee_ServiceGetListRecord"
                        R_ConductorGridSource="@_assignedConductorRef"
                        DragClueField="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_NAME)"
                        DragDrop
                        AllowAddNewRow="false"
                        AllowEditRow
                        AllowDeleteRow
                        TargetGridDrop="@_unassignedGridRef"
                        Pageable="true"
                        R_ServiceGetRecord="@R_ServiceGetRecord"
                        R_ServiceSaveBatch="@R_ServiceSaveBatch"
                        R_GridDragDropBeforeDrop="@((R_GridDragDropBeforeDropEventArgs<PMT02120EmployeeListDTO> args) => R_Selected_GridRowBeforeDrop(args))"
                        R_GridDragDropAfterDrop="@((R_GridDragDropAfterDropEventArgs<PMT02120EmployeeListDTO> args) => R_Selected_GridRowAfterDrop(args))"
                        Height="250px">
                    <R_GridColumns>
                        <R_GridTextColumn FieldName="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_ID)" HeaderText="@_localizer["_EmployeeId"]" Width="125px"></R_GridTextColumn>
                        <R_GridTextColumn FieldName="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_NAME)" HeaderText="@_localizer["_EmployeeName"]" Width="150px"></R_GridTextColumn>
                        <R_GridTextColumn FieldName="@nameof(PMT02120EmployeeListDTO.CEMPLOYEE_TYPE)" HeaderText="@_localizer["_EmployeeType"]" Width="150px"></R_GridTextColumn>
                    </R_GridColumns>
                </R_Grid>
            </R_GroupBox>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout Row Class="justify-content-end">
        <R_ItemLayout>
            <R_Button OnClick="@OnClose">@_localizer["_Cancel"]</R_Button>
            <R_Button Enabled="@HasMove" OnClick="@OnAssign">@_localizer["_Assign"]</R_Button>
        </R_ItemLayout>
    </R_StackLayout>

</R_StackLayout>
<R_ConductorGrid @ref="@_unassignedConductorRef"
                 R_ViewModel="@loViewModel"
                 R_IsHeader
                  />

<R_ConductorGrid @ref="@_assignedConductorRef"
                 R_ViewModel="@loViewModel"
                 R_ConductorParent="_unassignedConductorRef" />