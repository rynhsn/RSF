@inherits R_Page
@attribute [R_Page(Title = "History")]
@using PMT02100COMMON.DTOs.PMT02100
@using PMT02100COMMON.DTOs
@using PMT02100COMMON
@using PMT02100MODEL
@using PMT02100MODEL.FrontDTOs.PMT02100

<R_StackLayout Row>
    <R_ItemLayout col="3">
        <R_Grid @ref="@_gridHandoverBuildingRef"
                DataSource="@loViewModel.loHandoverBuildingList"
                Pageable="true"
                PageSize="20"
                R_ConductorGridSource="@_conductorHandoverBuildingRef"
                R_GridType="@R_eGridType.Original"
                AllowAddNewRow="false"
                AllowEditRow="false"
                AllowDeleteRow="false"
                Height="450px"
                R_Display="@Grid_Handover_Building_Display"
                R_ServiceGetListRecord="@Grid_Handover_Building_R_ServiceGetListRecord">
            <R_GridColumns>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverBuildingDTO.CBUILDING_DISPLAY_NAME) HeaderText="@_localizer["_Building"]"></R_GridTextColumn>
            </R_GridColumns>
        </R_Grid>
    </R_ItemLayout>
    <R_ItemLayout col="9">
        <R_StackLayout Row>
            <R_ItemLayout col="0">
                <R_Label>
                    @_localizer["_From"]
                </R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_DatePicker R_ConductorGridSource="_conductorHandoverBuildingRef"
                              Enabled
                              Value="loViewModel.VAR_FROM_DATE"
                              ValueChanged="@((DateTime? value) => FromDate_ValueChanged(value))">
                </R_DatePicker>
            </R_ItemLayout>
            <R_ItemLayout col="0">
                <R_Label>
                    @_localizer["_To"]
                </R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="3">
                <R_DatePicker R_ConductorGridSource="_conductorHandoverBuildingRef"
                              Enabled
                              Value="loViewModel.VAR_TO_DATE"
                              ValueChanged="@((DateTime? value) => ToDate_ValueChanged(value))">
                </R_DatePicker>
            </R_ItemLayout>
        </R_StackLayout>

        <R_Grid @ref="@_gridHandoverRef"
                DataSource="@loViewModel.loHandoverList"
                Pageable="true"
                PageSize="20"
                R_ConductorGridSource="@_conductorHandoverRef"
                R_GridType="@R_eGridType.Original"
                AllowAddNewRow="false"
                AllowEditRow="false"
                AllowDeleteRow="false"
                Height="400px"
                R_Display="@Grid_Handover_Display"
                R_ServiceGetListRecord="@Grid_Handover_R_ServiceGetListRecord">
            <R_GridColumns>
                <R_GridDatePickerColumn FieldName=@nameof(PMT02100HandoverDTO.DHO_ACTUAL_DATE) HeaderText="@_localizer["_HandoverDate"]" Width="150px"></R_GridDatePickerColumn>
                <R_GridCheckBoxColumn FieldName=@nameof(PMT02100HandoverDTO.LFORCED_HO) HeaderText="@_localizer["_IsForced"]" Width="125px"></R_GridCheckBoxColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CUNIT_TYPE_CATEGORY_ID) HeaderText="@_localizer["_UnitTypeCategory"]" Width="250px"></R_GridTextColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CUNIT_ID) HeaderText="@_localizer["_UnitId"]" Width="150px"></R_GridTextColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_DISPLAY) HeaderText="@_localizer["_Tenant"]" Width="250px"></R_GridTextColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_PHONE_NO) HeaderText="@_localizer["_PhoneNo"]" Width="150px"></R_GridTextColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_EMAIL) HeaderText="@_localizer["_EmailAddress"]" Width="200px"></R_GridTextColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CTENANT_CITY_DESCRIPTION) HeaderText="@_localizer["_City"]" Width="250px"></R_GridTextColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CDEPT_CODE) HeaderText="@_localizer["_Department"]" Width="150px"></R_GridTextColumn>
                <R_GridTextColumn FieldName=@nameof(PMT02100HandoverDTO.CREF_NO) HeaderText="@_localizer["_RefNo"]" Width="200px"></R_GridTextColumn>
                <R_GridDatePickerColumn FieldName=@nameof(PMT02100HandoverDTO.DREF_DATE) HeaderText="@_localizer["_RefDate"]" Width="150px"></R_GridDatePickerColumn>
            </R_GridColumns>
        </R_Grid>

        <R_StackLayout Row Class="justify-content-start">
            <R_ItemLayout>
                <R_Popup R_ConductorGridSource="@_conductorHandoverBuildingRef" Enabled="@(_gridHandoverRef.DataSource.Count > 0)" R_Before_Open_Popup="Before_Open_View_Checklist_Popup" R_After_Open_Popup="After_Open_View_Checklist_Popup">@_localizer["_ViewChecklist"]</R_Popup>
            </R_ItemLayout>
        </R_StackLayout>
    </R_ItemLayout>
</R_StackLayout>


<R_ConductorGrid @ref="_conductorHandoverBuildingRef"
                 R_IsHeader>
</R_ConductorGrid>

<R_ConductorGrid @ref="@_conductorHandoverRef"
                 R_ConductorParent="@_conductorHandoverBuildingRef">
</R_ConductorGrid>
