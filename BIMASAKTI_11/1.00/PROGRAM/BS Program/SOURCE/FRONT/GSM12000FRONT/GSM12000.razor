@page "/GSM12000"
@using GSM12000COMMON
@using GSM12000FrontResources
@using R_BlazorFrontEnd.Enums
@using R_BlazorFrontEnd.Interfaces
@inherits R_Page
@attribute [R_Page(Title = "Message Master")]
@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout Row="true">
    <R_ItemLayout col="1">
        <R_Label Class="fw-bold">@_localizer["MESSAGE_TYPE"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="3">
        <R_ComboBox Data="@_viewModel.MessageTypeList"
                    Value="@_viewModel.messageTypeValue"
                    ValueField="@nameof(GSM12000GSBCodeDTO.CCODE)"
                    TextField="@nameof(GSM12000GSBCodeDTO.CDESCRIPTION)"
                    R_ConductorSource="@_conductorRef"
                    ValueChanged="@((string value) => OnChanged(value))"
                    R_EnableOther />
    </R_ItemLayout>
</R_StackLayout>


<R_StackLayout Spacing="3" Class="mt-2">
    <R_Grid @ref="@_gridRef"
            Width="100%"
            Height="220px"
            PageSize="10"
            DataSource="@_viewModel.MessageGrid"
            Pageable="true"
            R_ConductorSource="@_conductorRef"
            R_GridType="@R_eGridType.Navigator"
            R_ServiceGetListRecord="@Grid_R_ServiceGetListRecord">

        <R_GridColumns>
            <R_GridTextColumn Width="190px" FieldName="@nameof(GSM12000DTO.CMESSAGE_NO)" HeaderText="@_localizer["MESSAGE_NO"]" />
            <R_GridTextColumn Width="190px" FieldName="@nameof(GSM12000DTO.CMESSAGE_NAME)" HeaderText="@_localizer["MESSAGE_NAME"]" />
            <R_GridTextColumn Width="190px" FieldName="@nameof(GSM12000DTO.CMESSAGE_DESCRIPTION)" HeaderText="@_localizer["DESCRIPTION"]" />
            <R_GridCheckBoxColumn Width="115px" FieldName="@nameof(GSM12000DTO.LACTIVE)" HeaderText="@_localizer["ACTIVE"]" />
            <R_GridTextColumn Width="145px" FieldName="@nameof(GSM12000DTO.CUPDATE_BY)" HeaderText="@_localizer["UPDATED_BY"]" />
            <R_GridDateTimePickerColumn Width="175px" FieldName="@nameof(GSM12000DTO.DUPDATE_DATE)" HeaderText="@_localizer["UPDATED_DATE"]" />
            <R_GridTextColumn Width="145px" FieldName="@nameof(GSM12000DTO.CCREATE_BY)" HeaderText="@_localizer["CREATED_BY"]" />
            <R_GridDateTimePickerColumn Width="175px" FieldName="@nameof(GSM12000DTO.DCREATE_DATE)" HeaderText="@_localizer["CREATED_DATE"]" />
        </R_GridColumns>
    </R_Grid>

</R_StackLayout>


<R_StackLayout Row="true">

    <R_ItemLayout col="12">
        <R_StackLayout Row="true" Class="mt-4">
            <R_ItemLayout col="2">
                <R_Label Class="fw-bold">@_localizer["MESSAGE_NO"]</R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@_viewModel.Data.CMESSAGE_NO"
                           R_ConductorSource="@_conductorRef"
                           R_EnableAdd="true"
                           @ref="_messageNoRef"
                           MaxLength="20"
                           R_EnableEdit="false" />
            </R_ItemLayout>
            <R_ItemLayout col="6">
                <R_TextBox @bind-Value="@_viewModel.Data.CMESSAGE_NAME"
                           R_ConductorSource="@_conductorRef"
                           R_EnableAdd="true"
                           @ref="_messageNoRef"
                           MaxLength="40"
                           R_EnableEdit="true" />
            </R_ItemLayout>
            <R_ItemLayout>
                <R_CheckBox R_ConductorSource="@_conductorRef" R_EnableEdit="false" R_EnableAdd="true" @bind-Value="@_viewModel.Data.LACTIVE" />
            </R_ItemLayout>
            <R_ItemLayout>
                <R_Label>@_localizer["Active"]</R_Label>
            </R_ItemLayout>
        </R_StackLayout>
        <R_StackLayout Row="true" Class="mt-2">
            <R_ItemLayout col="2">
                <R_Label Class="fw-bold">@_localizer["DESCRIPTION"]</R_Label>
            </R_ItemLayout>
            @*<R_ItemLayout col="9">
            <R_TextEditor @bind-Value="@_viewModel.Data.TMESSAGE_DESCRIPTION"
            R_ConductorSource="@_conductorRef"
            Height="175px"
            R_TextEditorToolMode="R_eTextEditorToolMode.None"
            Enabled="false"/>
            </R_ItemLayout>*@
            <R_ItemLayout col="9">
                <R_RTFViewer @bind-Value="@_viewModel.Data.TMESSAGE_DESCRIPTION"
                             R_ConductorSource="@_conductorRef"
                              R_EnableAdd
                              R_EnableEdit>
                </R_RTFViewer>
            </R_ItemLayout>
            @*<R_ItemLayout>
            <R_Popup R_Before_Open_Popup="R_Before_Open_Popup_Description"
            R_After_Open_Popup="R_After_Open_Popup_Description"
            R_ConductorSource="@_conductorRef" R_EnableAdd R_EnableEdit>@_localizer["_Update"]</R_Popup>
            </R_ItemLayout>*@
        </R_StackLayout>
        <R_StackLayout Row="true" Class="mt-2">
            <R_ItemLayout col="2">
                <R_Label Class="fw-bold">@_localizer["ADDITIONAL"]</R_Label>
            </R_ItemLayout>
            @*<R_ItemLayout col="9">
            <R_TextEditor @bind-Value="@_viewModel.Data.CADDITIONAL_DESCRIPTION"
            R_ConductorSource="@_conductorRef"
            R_TextEditorToolMode="R_eTextEditorToolMode.None"
            Enabled="false" />
            </R_ItemLayout>
            <R_ItemLayout>
            <R_Popup R_Before_Open_Popup="R_Before_Open_Popup_Additional"
            R_After_Open_Popup="R_After_Open_Popup_Additional"
            R_ConductorSource="@_conductorRef" R_EnableAdd R_EnableEdit>@_localizer["_Update"]</R_Popup>
            </R_ItemLayout>*@

            <R_ItemLayout col="9">
                <R_RTFViewer @bind-Value="@_viewModel.Data.CADDITIONAL_DESCRIPTION"
                             R_ConductorSource="@_conductorRef"
                              R_EnableAdd
                              R_EnableEdit>
                </R_RTFViewer>
            </R_ItemLayout>
        </R_StackLayout>
    </R_ItemLayout>


</R_StackLayout>


<R_StackLayout Row Class="justify-content-between mt-4">

    <R_StackLayout Row Class="justify-content-start">
        <R_ItemLayout>
            <R_AddButton R_Conductor="@_conductorRef" Enabled="@(_viewModel.MessageTypeList.Count != 0 && _conductorRef.R_ConductorMode == R_eConductorMode.Add)"></R_AddButton>
        </R_ItemLayout>

        <R_ItemLayout>
            <R_EditButton R_Conductor="@_conductorRef"></R_EditButton>
        </R_ItemLayout>

        <R_ItemLayout>
            <R_DeleteButton R_Conductor="@_conductorRef"></R_DeleteButton>
        </R_ItemLayout>

    </R_StackLayout>
    <R_StackLayout Row="true">
        <R_ItemLayout>
            <R_Popup R_ConductorSource="@_conductorRef" Enabled="@(_viewModel.MessageTypeList.Count != 0 && _conductorRef.R_ConductorMode == R_eConductorMode.Normal)" R_EnableOther R_After_Open_Popup="@R_After_Open_Popup_ActivateInactive" R_Before_Open_Popup="@R_Before_Open_Popup_ActivateInactive">@loLabel</R_Popup>
            </R_ItemLayout>
            <R_ItemLayout>
            <R_Popup R_Before_Open_Popup="R_BeforeOpenPrint" R_After_Open_Popup="R_AfterOpenPrint">@_localizer["PRINT"]</R_Popup>
            </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout>

            </R_StackLayout>
            <R_StackLayout Row Class="justify-content-end">
        <R_ItemLayout>
            <R_CancelButton R_Conductor="@_conductorRef"></R_CancelButton>
        </R_ItemLayout>

        <R_ItemLayout>
            <R_SaveButton R_Conductor="@_conductorRef"></R_SaveButton>
        </R_ItemLayout>

    </R_StackLayout>

    </R_StackLayout>

    <R_Conductor @ref="@_conductorRef"
             R_ViewModel="@_viewModel"
             R_IsHeader="true"
             R_ServiceSave="@Conductor_ServiceSave"
             R_ServiceDelete="@Conductor_ServiceDelete"
             R_ServiceGetRecord="@Conductor_ServiceGetRecord"
             R_Display="Display"
             R_Validation="@ActiveInactiveSaving"
             R_ConvertToGridEntity="@R_ConvertToGridEntity" />