@inherits R_Page
@attribute [R_Page(Title = "Hand Over PopUp")]
@inject R_ILocalizer<Resources_PMT02000_Class> _localizer

<R_StackLayout Style="width: 1100px">

    <R_StackLayout>
        <R_ItemLayout col="6">
            <h3 class="mb-0">@_viewModel._LOIHeader.CPROPERTY_NAME</h3>
        </R_ItemLayout>
    </R_StackLayout>
    <R_StackLayout Row>
        <R_ItemLayout col="8">
            <h6 class="mb-0">@_viewModel._LOIHeader.CBUILDING_NAME</h6>
        </R_ItemLayout>
        <R_ItemLayout col="4">
            <h6 class="mb-0">@_viewModel._LOIHeader.CDEPT_NAME</h6>
        </R_ItemLayout>
    </R_StackLayout>
    <R_StackLayout Row>
        <R_ItemLayout col="8">
            <h6 class="mb-0">@_viewModel._LOIHeader.CFLOOR_NAME, @_viewModel._LOIHeader.CUNIT_ID</h6>
        </R_ItemLayout>
        <R_ItemLayout col="4">
            <h6 class="mb-0">LOI Ref No: @_viewModel._LOIHeader.CREF_NO</h6>
        </R_ItemLayout>
    </R_StackLayout>
    <R_StackLayout Row>
        <R_ItemLayout col="8">
            <h6 class="mb-0">@_viewModel._LOIHeader.CTENANT_NAME</h6>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout Row Class="mt-3">

        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="5">
                    <R_Label>@_localizer["_HORefNo"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="6">
                    <R_TextBox @bind-Value="@_viewModel.Data.CHO_REF_NO"
                               @ref="@FocusLabelRefNo"
                               R_ConductorSource="_conConductor"
                               MaxLength="30"
                               R_EnableAdd>
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>

        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="5">
                    <R_Label>@_localizer["_HORefDate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="6">
                    <R_DatePicker @bind-Value="@_viewModel.Data.DHO_REF_DATE"
                                  R_ConductorSource="_conConductor"
                                    R_EnableAdd>
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>

        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="4">
                    <R_Label>@_localizer["_GrossSize"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="5">
                    <R_NumericTextBox @bind-Value="@_viewModel.Data.NGROSS_AREA_SIZE"
                                      R_ConductorSource="_conConductor"
                                      Enabled="false">
                    </R_NumericTextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout Row>
        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="5">
                    <R_Label>@_localizer["_HOPlanDate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="6">
                    <R_DatePicker @bind-Value="@_viewModel.Data.DHAND_OVER_DATE"
                                  R_ConductorSource="_conConductor"
                                  Enabled="false">
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>

        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="5">
                    <R_Label>@_localizer["_HOActualDate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="6">
                    <R_DatePicker @bind-Value="@_viewModel.Data.DHO_ACTUAL_DATE"
                                  R_ConductorSource="_conConductor"
                                    R_EnableAdd
                                    R_EnableEdit>
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>

        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="4">
                    <R_Label>@_localizer["_NetSize"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="5">
                    <R_NumericTextBox @bind-Value="@_viewModel.Data.NNET_AREA_SIZE"
                                      R_ConductorSource="_conConductor"
                                      Enabled="false">
                    </R_NumericTextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
    </R_StackLayout>


    <R_StackLayout Row>
        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="5">
                    <R_Label>@_localizer["_PlanStartDate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="6">
                    <R_DatePicker @bind-Value="@_viewModel.Data.DHO_PLAN_START_DATE"
                                  R_ConductorSource="_conConductor"
                                    R_EnableAdd
                                    R_EnableEdit>
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>

        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="5">
                    <R_Label>@_localizer["_PlanEndDate"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="6">
                    <R_DatePicker @bind-Value="@_viewModel.Data.DHO_PLAN_END_DATE"
                                  R_ConductorSource="_conConductor"
                                    R_EnableAdd
                                    R_EnableEdit>
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>

        <R_ItemLayout col="4">
            <R_StackLayout Row>
                <R_ItemLayout col="4">
                    <R_Label>@_localizer["_ActualSize"]</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="5">
                    <R_NumericTextBox @bind-Value="@_viewModel.Data.NHO_ACTUAL_SIZE"
                                      R_ConductorSource="_conConductor"
                                            R_EnableAdd
                                            R_EnableEdit>
                    </R_NumericTextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout>
        <R_Grid @ref="@_griLOIDetailRef"
                DataSource="_viewModel._listDetail"
                Pageable="true"
                PageSize="10"
                R_ConductorGridSource="@_conGrid"
                R_GridType="@R_eGridType.Batch"
                R_ServiceGetListRecord="@R_ServiceLOIDetailListRecord"
                R_ServiceSave="@ServiceSaveDetailList"
                R_Validation="@ValidationDetail"
                R_ServiceGetRecord="@R_ServiceGetRecordAsync"
                AllowDeleteRow="true"
                AllowAddNewRow="false"
                AllowEditRow="true"
                Height="300px">
            <R_GridColumns>
                <R_GridTextColumn Width="155px"
                                  FieldName="@nameof(PMT02000LOIDetailListDTO.CCHARGES_TYPE_NAME)"
                                  HeaderText=@_localizer["_UtilityType"] />
                <R_GridTextColumn Width="155px"
                                  FieldName="@nameof(PMT02000LOIDetailListDTO.CMETER_NO)"
                                  HeaderText=@_localizer["_UtilityType"] />
                <R_GridNumericColumn Width="155px"
                                     FieldName="@nameof(PMT02000LOIDetailListDTO.NCAPACITY)"
                                     HeaderText=@_localizer["_UtilityType"] />
                <R_GridNumericColumn Width="155px"
                                     FieldName="@nameof(PMT02000LOIDetailListDTO.NCALCULATION_FACTOR)"
                                     HeaderText=@_localizer["_CF"] />
                <R_GridTextColumn Width="155px"
                                  FieldName="@nameof(PMT02000LOIDetailListDTO.CCHARGES_NAME)"
                                  HeaderText=@_localizer["_Charge"] />
                <R_GridNumericColumn Width="155px"
                                     FieldName="@nameof(PMT02000LOIDetailListDTO.IYEAR)"
                                     HeaderText=@_localizer["_StartYear"]
                                     ThousandSeparator="false"
                                                  R_EnableEdit />
                <R_GridComboBoxColumn Width="180px" Data="@_viewModel.GetMonthList"
                                      FieldName="@nameof(PMT02000LOIDetailListDTO.CMONTH)"
                                      ValueField="@nameof(PMT02000GetMonthDTO.Id)"
                                      TextField="@nameof(PMT02000GetMonthDTO.Name)"
                                      HeaderText=@_localizer["_StartMonth"]
                                      R_EnableEdit="true"
                                      PopupMaxHeight="120px" />

                <R_GridNumericColumn Width="155px"
                                     FieldName="@nameof(PMT02000LOIDetailListDTO.IMETER_START)"
                                     HeaderText=@_localizer["_MeterStart"]
                                                  R_EnableEdit
                                     Min="0" />
                <R_GridTextColumn Width="150px"
                                  FieldName="@nameof(PMT02000LOIDetailListDTO.CUPDATE_BY)"
                                  HeaderText=@_localizer["_UpdBy"] />
                <R_GridDateTimePickerColumn Width="225px"
                                            FieldName="@nameof(PMT02000LOIDetailListDTO.DUPDATE_DATE)"
                                            HeaderText=@_localizer["_UpdDate"] />
                <R_GridTextColumn Width="150px"
                                  FieldName="@nameof(PMT02000LOIDetailListDTO.CCREATE_BY)"
                                  HeaderText=@_localizer["_CreatedBy"] />
                <R_GridDateTimePickerColumn Width="225px"
                                            FieldName="@nameof(PMT02000LOIDetailListDTO.DUPDATE_DATE)"
                                            HeaderText=@_localizer["_CreatedDate"] />
            </R_GridColumns>
            </R_Grid>
            </R_StackLayout>
            @* Button CRUD *@


            <R_StackLayout Row Class="d-flex justify-content-end">
        <R_StackLayout Row>
            <R_ItemLayout>
                <R_Button OnClick="OnCancel"> @_localizer["_Cancel"] </R_Button>
            </R_ItemLayout>
            <R_ItemLayout>
                <R_SaveButton R_Conductor="@_conConductor" />
            </R_ItemLayout>
        </R_StackLayout>
    </R_StackLayout>
</R_StackLayout>

<R_Conductor @ref="_conConductor"
              R_IsHeader
             R_ViewModel="_viewModel"
             R_ServiceSave="@ServiceSaveAllData"
             R_AfterAdd="@AfterAdd"
             R_ServiceGetRecord="@ServiceGetRecord"
             R_Display="@ServiceDisplayHederDetail"
             R_Validation="@ValidationHeader" />
<R_ConductorGrid @ref="@_conGrid"
                      R_IsHeader />