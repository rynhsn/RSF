@page "/GLT00500"
@inherits R_Page
@using GLT00500COMMON.DTOs
@using GLT00500MODEL

<R_StackLayout>
    <R_GroupBox Title="Import File" ShowBorder>
        <R_StackLayout Row>
            <R_ItemLayout col="1">
                <R_Label>File Name</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="5">
                <R_InputFile OnChange="InputFileOnChange" Accepts="@accepts" />
            </R_ItemLayout>
            <R_ItemLayout col="1">
                <R_Button R_ConductorSource="_conductorImportAdjustmentJournalRef" OnClick="OnClickTemplate">Template</R_Button>
            </R_ItemLayout>
        </R_StackLayout>
        <R_StackLayout Row>
            <R_ItemLayout col="1">
            </R_ItemLayout>
            <R_ItemLayout col="5">
                <R_CheckBox Value="@loImportAdjustmentJournalViewModel.IsSeparateDCAmount"
                            R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                            ValueChanged="((bool value) => ChechBoxValueChanged(value))">
                </R_CheckBox>
                <R_Label>
                    Separate Debit/Credit Amount
                </R_Label>
            </R_ItemLayout>
        </R_StackLayout>
    </R_GroupBox>

    <R_GroupBox Title="Journal Description" ShowBorder>
        <R_StackLayout Row>
            <R_ItemLayout col="5">
                <R_StackLayout Row>
                    <R_ItemLayout col="3">
                        <R_Label>Department</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="4">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CDEPT_CODE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row>
                    <R_ItemLayout col="3">
                        <R_Label>Reference No.</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="4">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CREF_NO"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_Label>Date</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="3">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CREF_DATE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row>
                    <R_ItemLayout col="3">
                        <R_Label>Document No.</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="4">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CDOC_NO"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                    <R_ItemLayout col="1">
                        <R_Label>Date</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="3">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CDOC_DATE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>

            <R_ItemLayout col="5">
                <R_StackLayout Row>
                    <R_ItemLayout col="3">
                        <R_Label>Currency</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CCURRENCY_CODE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row>
                    <R_ItemLayout col="3"></R_ItemLayout>
                    <R_ItemLayout col="3">
                        <R_Label>Base Rate</R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="1"></R_ItemLayout>
                    <R_ItemLayout col="4">
                        <R_Label>Currency Rate</R_Label>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row>
                    <R_ItemLayout col="3">
                        <R_Label>Local Currency</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_NumericTextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.NLBASE_RATE"
                                          R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                          Enabled=false
                                          Arrows=false>
                        </R_NumericTextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CCURRENCY_CODE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_NumericTextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.NLCURRENCY_RATE"
                                          R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                          Arrows=false
                                          Enabled=false>
                        </R_NumericTextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CLOCAL_CURRENCY_CODE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row>
                    <R_ItemLayout col="3">
                        <R_Label>Base Currency</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_NumericTextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.NBBASE_RATE"
                                          R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                          Arrows=false
                                          Enabled=false>
                        </R_NumericTextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CCURRENCY_CODE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_NumericTextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.NBCURRENCY_RATE"
                                          R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                          Arrows=false
                                          Enabled=false>
                        </R_NumericTextBox>
                    </R_ItemLayout>

                    <R_ItemLayout col="2">
                        <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CBASE_CURRENCY_CODE"
                                   R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                   Enabled=false>
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>

            <R_ItemLayout col="2">
                <R_StackLayout Row>
                    <R_ItemLayout col="4">
                        <R_Label>
                            Total Debit
                        </R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="8">
                        <R_NumericTextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.NTOTAL_DEBIT"
                                          R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                          Arrows=false
                                          Enabled=false>
                        </R_NumericTextBox>
                    </R_ItemLayout>
                </R_StackLayout>
                <R_StackLayout Row>
                    <R_ItemLayout col="4">
                        <R_Label>
                            Total Credit
                        </R_Label>
                    </R_ItemLayout>
                    <R_ItemLayout col="8">
                        <R_NumericTextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.NTOTAL_CREDIT"
                                          R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                                          Arrows=false
                                          Enabled=false>
                        </R_NumericTextBox>
                    </R_ItemLayout>
                </R_StackLayout>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Row>
            <R_ItemLayout col="1">
                <R_Label>Description</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="7">
                <R_TextBox @bind-Value="@loImportAdjustmentJournalViewModel.loHeaderDisplay.CTRANS_DESC"
                           R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                           Enabled=false>
                </R_TextBox>
            </R_ItemLayout>
        </R_StackLayout>
    </R_GroupBox>



    <R_GroupBox Title="Journal Detail" ShowBorder>
        <R_StackLayout Row>
            <R_ItemLayout col="12">
                <R_Grid @ref="@_gridImportAdjustmentJournalRef"
                        DataSource="@loImportAdjustmentJournalViewModel.loDetailDisplayList"
                        R_ConductorSource="@_conductorImportAdjustmentJournalRef"
                        R_GridType="@R_eGridType.Original"
                        AllowAddNewRow="false"
                        AllowEditRow="false"
                        AllowDeleteRow="false"
                        R_ServiceGetListRecord="@Grid_R_ServiceGetImportAdjustmentJournalListRecord">
                    <R_GridColumns>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.SEQ_NO)" HeaderText="No." Width="100px"></R_GridNumericColumn>
                        <R_GridTextColumn FieldName="@nameof(GLT00500DetailDTO.CGLACCOUNT_NO)" HeaderText="Account No." Width="150px"></R_GridTextColumn>
                        <R_GridTextColumn FieldName="@nameof(GLT00500DetailDTO.CGLACCOUNT_NAME)" HeaderText="Account Name" Width="200px"></R_GridTextColumn>
                        <R_GridTextColumn FieldName="@nameof(GLT00500DetailDTO.CCENTER_CODE)" HeaderText="Center" Width="150px"></R_GridTextColumn>
                        <R_GridTextColumn FieldName="@nameof(GLT00500DetailDTO.CDBCR)" HeaderText="D/C" Visible="@IsSingleDCAmount" Width="150px"></R_GridTextColumn>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.NDEBIT)" HeaderText="Debit" Visible="@loImportAdjustmentJournalViewModel.IsSeparateDCAmount" Width="150px"></R_GridNumericColumn>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.NCREDIT)" HeaderText="Credit" Visible="@loImportAdjustmentJournalViewModel.IsSeparateDCAmount" Width="150px"></R_GridNumericColumn>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.NTRANS_AMOUNT)" HeaderText="Amount" Visible="@IsSingleDCAmount" Width="150px"></R_GridNumericColumn>
                        <R_GridTextColumn FieldName="@nameof(GLT00500DetailDTO.CDETAIL_DESC)" HeaderText="Description" Width="250px"></R_GridTextColumn>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.NLDEBIT)" HeaderText="DB (Local)" Width="150px"></R_GridNumericColumn>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.NLCREDIT)" HeaderText="CR (Local)" Width="150px"></R_GridNumericColumn>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.NBDEBIT)" HeaderText="DB (Base)" Width="150px"></R_GridNumericColumn>
                        <R_GridNumericColumn FieldName="@nameof(GLT00500DetailDTO.NBCREDIT)" HeaderText="CR (Base)" Width="150px"></R_GridNumericColumn>
                        <R_GridTextColumn Visible="@IsSaveProcess" FieldName="@nameof(GLT00500DetailDTO.CVALID)" HeaderText="Valid" Width="100px"></R_GridTextColumn>
                        <R_GridTextColumn Visible="@IsSaveProcess" FieldName="@nameof(GLT00500DetailDTO.CNOTES)" HeaderText="Notes" Width="300px"></R_GridTextColumn>
                    </R_GridColumns>
                </R_Grid>
            </R_ItemLayout>
        </R_StackLayout>
    </R_GroupBox>

    <R_StackLayout Row>
        <R_ItemLayout col="12">
            <R_ProgressBar Label="@loImportAdjustmentJournalViewModel.Message" MaxValue="100" Value="@loImportAdjustmentJournalViewModel.Percentage"></R_ProgressBar>
        </R_ItemLayout>
    </R_StackLayout>


    <R_StackLayout Row Justify="R_eJustify.Center">
        <R_ItemLayout>
            <R_Button R_ConductorSource="@_conductorImportAdjustmentJournalRef" Enabled="@IsFileExist" OnClick="SaveImportAdjustmentJournal">Process</R_Button>
            <R_Button R_ConductorSource="@_conductorImportAdjustmentJournalRef" OnClick="ResetFormProcess">Reset</R_Button>
        </R_ItemLayout>
    </R_StackLayout>
    </R_StackLayout>

    <R_Conductor @ref="@_conductorImportAdjustmentJournalRef"
             R_ViewModel="@loImportAdjustmentJournalViewModel"
             R_IsHeader="true">
    </R_Conductor>
