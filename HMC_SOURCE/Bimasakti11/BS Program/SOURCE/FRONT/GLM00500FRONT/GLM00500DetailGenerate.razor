@page "/GLM00500DetailGenerate"
@using GLM00500FrontResources
@using R_BlazorFrontEnd.Interfaces
@inherits R_Page
@attribute [R_Page(Title = "Generate Account Budget")];
@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout Row Spacing="1" Class="mb-2">
    <R_ItemLayout>
        <R_Label>@_localizer["LABEL_YEAR"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox Value="@_viewModel.BudgetHDEntity.CYEAR" Enabled="false"/>
    </R_ItemLayout>
    <R_ItemLayout>
        <R_Label>@_localizer["LABEL_BUDGET"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox Value="@_viewModel.BudgetHDEntity.CBUDGET_NO" Enabled="false"/>
    </R_ItemLayout>
    <R_ItemLayout col="5">
        <R_TextBox Value="@_viewModel.BudgetHDEntity.CBUDGET_NAME" Enabled="false"/>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row Spacing="1" Class="mb-4">
    <R_ItemLayout>
        <R_Label>@_localizer["LABEL_ACCTYPE"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout>
        <R_RadioGroup Data="@_viewModel.CGLACCOUNT_TYPE"
                      @bind-Value="_viewModel.GenerateAccountBudget.CGLACCOUNT_TYPE"
                      ValueField="Key"
                      TextField="Value"
                      Enabled="false"/>
    </R_ItemLayout>
</R_StackLayout>

<R_GroupBox ShowBorder Class="pt-2 mb-2">
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_FROMACC"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CFROM_GLACCOUNT_NO"/>
    </R_ItemLayout>
    <R_Lookup
        R_Before_Open_Lookup="BeforeOpenLookupFromAccount"
        R_After_Open_Lookup="AfterOpenLookupFromAccount"/>
    <R_ItemLayout col="6">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CFROM_GLACCOUNT_NAME" Enabled="false" CharacterCasing="R_eCharacterCasing.Upper"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_TOACC"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CTO_GLACCOUNT_NO"/>
    </R_ItemLayout>
    <R_Lookup
        R_Before_Open_Lookup="BeforeOpenLookupToAccount"
        R_After_Open_Lookup="AfterOpenLookupToAccount"/>
    <R_ItemLayout col="6">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CTO_GLACCOUNT_NAME" Enabled="false" CharacterCasing="R_eCharacterCasing.Upper"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_FROMCENTER"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CFROM_CENTER_CODE" CharacterCasing="R_eCharacterCasing.Upper"/>
    </R_ItemLayout>
    <R_Lookup
        R_Before_Open_Lookup="BeforeOpenLookupFromCenter"
        R_After_Open_Lookup="AfterOpenLookupFromCenter"/>
    <R_ItemLayout col="6">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CFROM_CENTER_NAME" Enabled="false" CharacterCasing="R_eCharacterCasing.Upper"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_TOCENTER"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CTO_CENTER_CODE" CharacterCasing="R_eCharacterCasing.Upper"/>
    </R_ItemLayout>
    <R_Lookup
        R_Before_Open_Lookup="BeforeOpenLookupToCenter"
        R_After_Open_Lookup="AfterOpenLookupToCenter"/>
    <R_ItemLayout col="6">
        <R_TextBox @bind-Value="_viewModel.GenerateAccountBudget.CTO_CENTER_NAME" Enabled="false" CharacterCasing="R_eCharacterCasing.Upper"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_BASEDON"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout>
        <R_RadioGroup Data="@_viewModel.CBASED_ON"
                      @bind-Value="_viewModel.GenerateAccountBudget.CBASED_ON"
                      ValueField="Key"
                      TextField="Value"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_BUDGETYEAR"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_NumericTextBox @bind-Value="_viewModel.SelectedYear"
                          Max="_viewModel.Periods.IMAX_YEAR"
                          Min="_viewModel.Periods.IMIN_YEAR"
                          OnLostFocused="GetBudgetHDList"
                          ThousandSeparator="false"
                          Enabled="@(_viewModel.GenerateAccountBudget.CBASED_ON == "EB")"/>
    </R_ItemLayout>
    <R_ItemLayout col="2" Class="ms-5">
        <R_Label>@_localizer["LABEL_BUDGETNO"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="4">
        <R_ComboBox Data="_viewModel.BudgetHDList"
                    @bind-Value="_viewModel.GenerateAccountBudget.CSOURCE_BUDGET_NO"
                    ValueField="@nameof(GLM00500BudgetHDDTO.CBUDGET_NO)"
                    TextField="@nameof(GLM00500BudgetHDDTO.CBUDGET_NAME_DISPLAY)"
                    Enabled="@(_viewModel.GenerateAccountBudget.CBASED_ON == "EB")"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_FROMPERIOD"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_ComboBox Data="_viewModel.CPERIOD"
                    @bind-Value="_viewModel.GenerateAccountBudget.CFROM_PERIOD_NO"
                    ValueField="Key"
                    TextField="Value"
                    OnChanged="CheckPeriodFrom"/>
    </R_ItemLayout>
    <R_ItemLayout col="2" Class="ms-5">
        <R_Label>@_localizer["LABEL_TOPERIOD"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_ComboBox Data="_viewModel.CPERIOD"
                    @bind-Value="_viewModel.GenerateAccountBudget.CTO_PERIOD_NO"
                    ValueField="Key"
                    TextField="Value"
                    OnChanged="CheckPeriodTo"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_BY"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_RadioGroup Data="@_viewModel.CBY"
                      @bind-Value="_viewModel.GenerateAccountBudget.CBY"
                      ValueField="Key"
                      TextField="Value"
                      Layout="R_eRadioGroupLayout.Vertical"
                      OnChanged="ChangeBy"/>
    </R_ItemLayout>
    <R_ItemLayout col="3" Class="ms-5">
        <R_ItemLayout Class="mb-1">
            <R_NumericTextBox @bind-Value="_viewModel.GenerateAccountBudget.NBY_PCT" Enabled="@(_viewModel.GenerateAccountBudget.CBY == "P")" Decimals="2"/>
        </R_ItemLayout>
        <R_ItemLayout>
            <R_NumericTextBox @bind-Value="_viewModel.GenerateAccountBudget.NBY_AMOUNT" Enabled="@(_viewModel.GenerateAccountBudget.CBY != "P")" Decimals="2"/>
        </R_ItemLayout>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row Spacing="1" Class="mb-1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_UPDATEMETHOD"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout>
        <R_RadioGroup Data="@_viewModel.CUPDATE_METHOD"
                      @bind-Value="_viewModel.GenerateAccountBudget.CUPDATE_METHOD"
                      ValueField="Key"
                      TextField="Value"/>
    </R_ItemLayout>
</R_StackLayout>
</R_GroupBox>


<R_StackLayout Row Class="mt-4">
    <R_ItemLayout>
        <R_Button OnClick="ClickProcess">@_localizer["LABEL_BTNPROCESS"]</R_Button>
    </R_ItemLayout>
    <R_ItemLayout>
        <R_Button OnClick="ClickCancel">@_localizer["LABEL_BTNCANCEL"]</R_Button>
    </R_ItemLayout>
</R_StackLayout>