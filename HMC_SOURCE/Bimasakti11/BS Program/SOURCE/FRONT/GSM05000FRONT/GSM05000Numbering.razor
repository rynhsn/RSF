@using GSM05000FrontResources
@using R_BlazorFrontEnd.Interfaces
@inherits R_Page
@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout Row="true" Spacing="1">
    <R_ItemLayout col="2">
        <R_Label>@_localizer["LABEL_TRANSCODE"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="1">
        <R_TextBox Value="@_viewModel.HeaderEntity.CTRANS_CODE"
                   Enabled="false"/>
    </R_ItemLayout>
    <R_ItemLayout col="3">
        <R_TextBox Value="@_viewModel.HeaderEntity.CTRANSACTION_NAME"
                   Enabled="false"/>
    </R_ItemLayout>

    <R_ItemLayout col="2">
        <R_CheckBox Value="@_viewModel.HeaderEntity.LDEPT_MODE"
                    Enabled="false"/>
        <R_Label>@_localizer["LABEL_DEPTMODE"]</R_Label>
    </R_ItemLayout>

    <R_ItemLayout>
        <R_Label>@_localizer["LABEL_PERIODMODE"]</R_Label>
    </R_ItemLayout>

    <R_ItemLayout col="2">
        <R_TextBox Value="@_viewModel.HeaderEntity.CPERIOD_MODE_DESCR"
                   Enabled="false"/>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout>
    <R_ItemLayout col="12">
        <R_Grid @ref="@_gridRef"
                DataSource="@_viewModel.GridList"
                Pageable
                PageSize="23"
                R_ConductorGridSource="@_conductorRef"
                R_GridType="@R_eGridType.Original"
                R_ServiceGetListRecord="@GetList"
                AllowDeleteRow="true"
                AllowEditRow="true"
                AllowAddNewRow="true"
                R_Before_Open_Grid_Lookup="BeforeLookupNumbering"
                R_After_Open_Grid_Lookup="AfterLookupNumbering"
                Width="100%"
                Height="575px"

                R_ServiceGetRecord="GetRecord"
                R_AfterAdd="@AfterAdd"
                R_BeforeEdit="@BeforeEdit"
                R_Saving="@Saving"
                R_ServiceSave="@ServiceSave"
                R_AfterSave="@AfterSave"
                R_ServiceDelete="@ServiceDelete"
                R_Validation="@Validation">
            <R_GridColumns>
                <R_GridTextColumn FieldName="@nameof(GSM05000NumberingGridDTO.CPERIOD)" HeaderText="@_localizer["LABEL_PERIOD"]" MaxLength="@(_viewModel.HeaderEntity.CPERIOD_MODE == "Y" ? 4 : 7)"  Width="100px" R_EnableAdd="@(_viewModel.HeaderEntity.CPERIOD_MODE != "N")"/>
                <R_GridLookupColumn FieldName="@nameof(GSM05000NumberingGridDTO.CDEPT_CODE)" HeaderText="@_localizer["LABEL_DEPTCODE"]" R_EnableAdd="@_viewModel.HeaderEntity.LDEPT_MODE" Width="180px"/>
                <R_GridTextColumn FieldName="@nameof(GSM05000NumberingGridDTO.CDEPT_NAME)" HeaderText="@_localizer["LABEL_DEPTNAME"]" Width="200px"/>
                <R_GridNumericColumn TValue="int" FieldName="@nameof(GSM05000NumberingGridDTO.ISTART_NUMBER)" HeaderText="@_localizer["LABEL_STARTNUMBER"]" R_EnableAdd R_EnableEdit Min="1" Max="1000" Step="1" Width="120px"/>
                <R_GridNumericColumn TValue="int" FieldName="@nameof(GSM05000NumberingGridDTO.ILAST_NUMBER)" HeaderText="@_localizer["LABEL_NEXTNUMBER"]" Width="100px"/>
                <R_GridTextColumn FieldName="@nameof(GSM05000NumberingGridDTO.CUPDATE_BY)" HeaderText="@_localizer["LABEL_UPDATEDBY"]" Width="120px"/>
                <R_GridDateTimePickerColumn FieldName="@nameof(GSM05000NumberingGridDTO.DUPDATE_DATE)" HeaderText="@_localizer["LABEL_UPDATEDDATE"]" Width="180px"/>
                <R_GridTextColumn FieldName="@nameof(GSM05000NumberingGridDTO.CCREATE_BY)" HeaderText="@_localizer["LABEL_CREATEDBY"]" Width="120px"/>
                <R_GridDateTimePickerColumn FieldName="@nameof(GSM05000NumberingGridDTO.DCREATE_DATE)" HeaderText="@_localizer["LABEL_CREATEDDATE"]" Width="180px"/>
            </R_GridColumns>
        </R_Grid>
    </R_ItemLayout>
</R_StackLayout>

<R_ConductorGrid @ref="@_conductorRef"
                 R_IsHeader/>