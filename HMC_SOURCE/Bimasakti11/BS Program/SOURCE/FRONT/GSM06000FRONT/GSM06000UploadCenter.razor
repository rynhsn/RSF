@inherits R_Page
@attribute [R_Page(Title = "Upload File")]


<R_StackLayout Row>
    <R_ItemLayout col="2" Class="d-inline">
        <R_Label>Source File</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="7">
        <R_TextBox @bind-Value="@_viewModel.SourceFileName"
                   Enabled="false">
        </R_TextBox>
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_InputFile OnChange="@SourceUpload_OnChange"
                     Accepts="@accepts">
        </R_InputFile>
    </R_ItemLayout>
</R_StackLayout>


<R_StackLayout Row>
    <R_ItemLayout col="2" Class="d-inline">
        <R_Label>Type</R_Label>
    </R_ItemLayout>

    <R_ItemLayout>
        <R_RadioGroup Data="@_viewModel.loTypeModeList"
                      @bind-Value="@_viewModel.CurrentObjectParam.CCB_TYPE"
                      Enabled="false"
                      ValueField="@nameof(GSM06000CodeDTO.CCODE)"
                      TextField="@nameof(GSM06000CodeDTO.CDESCRIPTION)" />
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row>
    <R_ItemLayout col="2" Class="d-inline">
        <R_Label>Bank</R_Label>
    </R_ItemLayout>

    <R_ItemLayout>
        <R_RadioGroup Data="@_viewModel.loTypeBankList"
                      @bind-Value="@_viewModel.CurrentObjectParam.CBANK_TYPE"
                      Enabled="false"
                      ValueField="@nameof(GSM06000CodeDTO.CCODE)"
                      TextField="@nameof(GSM06000CodeDTO.CDESCRIPTION)" />
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row>
    <R_Grid @ref="@JournalGroup_gridRef"
            DataSource="@_viewModel.JournalGroupValidateUploadError"
            Pageable
             R_GridType="@R_eGridType.Batch"
             PageSize="10"
             Height="300px"
             Width="600px"
             R_ServiceGetListRecord="@Upload_ServiceGetListRecord">
         <R_GridColumns>
             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.NO)"
                               HeaderText="No"
                               Width="50px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CCB_CODE)"
                               HeaderText="Code"
                               Width="100px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CCB_NAME)"
                               HeaderText="Name"
                               Width="301px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CADDRESS)"
                               HeaderText="Address"
                               Width="120px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CEMAIL)"
                               HeaderText="Email"
                               Width="130px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CPHONE1)"
                               HeaderText="Phone 1"
                               Width="100px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CPHONE2)"
                               HeaderText="Phone 2"
                               Width="150px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CATTENTION_NAME)"
                               HeaderText="Attention Name"
                               Width="300px" />

             <R_GridTextColumn FieldName="@nameof(GSM06000UploadErrorValidateDTO.CATTENTION_POSITION)"
                               HeaderText="Attention Position"
                               Width="152px" />

             <R_GridTextColumn FieldName=@nameof(GSM06000UploadErrorValidateDTO.ErrorFlag)
                               Width="150px"
                               HeaderText="Error Flag"
                               Visible="@_viewModel.VisibleError" />

             <R_GridTextColumn FieldName=@nameof(GSM06000UploadErrorValidateDTO.CNOTES)
                               Width="300px"
                               HeaderText="Notes"
                               Visible="@_viewModel.VisibleError" />

         </R_GridColumns>
     </R_Grid>
 </R_StackLayout>

 <R_StackLayout Row>
    <R_ItemLayout col="12">
        <R_ProgressBar Label="@_viewModel.Message" MaxValue="100" Value="@_viewModel.Percentage"></R_ProgressBar>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row>
    <R_ItemLayout col="8">
        <R_StackLayout Row>
            <R_ItemLayout col="3">
                <R_Label>Total Row(s)</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2">
                <R_NumericTextBox @bind-Value="@_viewModel.SumListExcel"
                                  Arrows="false"
                                  Enabled="false">
                </R_NumericTextBox>
            </R_ItemLayout>
            <R_ItemLayout col="1">
                <R_Label>Valid</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2" Class="bg-success">
                <R_NumericTextBox @bind-Value="@_viewModel.SumValidDataExcel"
                                  Arrows="false"
                                  Enabled="false">
                </R_NumericTextBox>
            </R_ItemLayout>
            <R_ItemLayout col="1">
                <R_Label>Invalid</R_Label>
            </R_ItemLayout>
            <R_ItemLayout col="2" Class="badge bg-danger">
                <R_NumericTextBox @bind-Value="@_viewModel.SumInvalidDataExcel"
                                  Arrows="false"
                                  Enabled="false">
                </R_NumericTextBox>
            </R_ItemLayout>
        </R_StackLayout>
    </R_ItemLayout>
    <R_ItemLayout col="4" hidden="@_viewModel.VisibleError">
        <R_StackLayout Row Class="justify-content-end">
             <R_ItemLayout>
                 <R_Button OnClick="@Button_OnClickCloseAsync">
                     Cancel
                 </R_Button>
                 <R_Button OnClick="Button_OnClickOkAsync" Enabled="@FileHasData">
                     Proses
                 </R_Button>
             </R_ItemLayout>
         </R_StackLayout>
     </R_ItemLayout>
     <R_ItemLayout col="4" hidden="@(!_viewModel.VisibleError)">
         <R_StackLayout Row Class="justify-content-end">
             <R_ItemLayout>
                 <R_Button OnClick="@Button_OnClickCloseAsync">
                     Cancel
                 </R_Button>
                 <R_Button OnClick="@Button_OnClickSaveAsync">
                     Save To Excel
                 </R_Button>
             </R_ItemLayout>
         </R_StackLayout>
     </R_ItemLayout>
 </R_StackLayout>
