delete from SAT_LOCKING where CUSER_ID='hmc'
-- CD-r5fdbsvr1#

EXEC RSP_GS_GET_SALES_TAX_PCT_LIST
delete from SAT_LOCKING where CUSER_ID='hpc'
SELECT CBASE_CURRENCY_CODE 
      ,CLOCAL_CURRENCY_CODE
FROM GSM_COMPANY (NOLOCK)
WHERE CCOMPANY_ID = 'Rcd'

SELECT LINCREMENT_FLAG
      ,LAPPROVAL_FLAG 
FROM GSM_TRANSACTION_CODE (NOLOCK)
WHERE CCOMPANY_ID = 'rcd'
AND CTRANSACTION_CODE='000030'

exec RFN_GET_DB_TODAY 'Rcd'

RSP_GL_GET_SYSTEM_PARAM 'Rcd'

SELECT IMIN_YEAR=CAST(MIN(CYEAR) AS INT),IMAX_YEAR=CAST(MAX(CYEAR) AS INT) FROM GSM_PERIOD (NOLOCK)WHERE CCOMPANY_ID = 'RCD'
--getLIST
exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'rcd', 'admin', '202306', '', 'EN'

RSP_GL_GET_JOURNAL_DETAIL_LIST '2C6AFFF4-848E-405F-9A0C-C6E9AD240748', 'EN'


select * from GSM_PERIOD_DT

exec dbo.RFN_GET_DB_TODAY 'RCD'

exec RSP_GL_GET_JOURNAL_DETAIL_LIST '',''

CREC_ID --
LVALID --
CDEPT_CODE --

CDEPT_CODE_NAME --ga ada
CREF_NO
CDOC_NO --gaada
CDOC_DATE --gaada
ISEQUENCE --gaada
CSTART_DATE --gaada
CNEXT_DATE --

CTRANS_DESC
CCURRENCY_CODE
NTRANS_AMOUNT
CLOCAL_CURRENCY_CODE
NLTRANS_AMOUNT
CBASE_CURRENCY_CODE
NBTRANS_AMOUNT

exec [dbo].[RSP_GL_SEARCH_ACTIVE_REVERSING_LIST]
	 'rcd'--@CCOMPANY_ID		VARCHAR(20)
	,'hmc'--@CUSER_ID			VARCHAR(20)
	
	,'202307'--@CPERIOD			CHAR(6)
	,''--@CSEARCH_TEXT		NVARCHAR(30)
	,'en'--@CLANGUAGE_ID		CHAR(2)

	exec RSP_GL_GET_JOURNAL_DETAIL_LIST 'CE223EBD-E65A-4D35-82A8-95F0137F7667', 'en'

	SELECT LINCREMENT_FLAG
      ,LAPPROVAL_FLAG 
FROM GSM_TRANSACTION_CODE (NOLOCK)
WHERE CCOMPANY_ID = 'RCD'
AND CTRANSACTION_CODE='000030'
8F260559-3D07-4C6A-AD0B-3DD85AC532A4
11CC65B2-E438-429F-9DA6-CAE37BDFFFC5
62C7E6CC-543D-445B-80AD-1F1E53BE9909
972CF4AE-2753-47FF-A419-FAA6FAF264B5
2CD90125-D4FD-4D2B-AAEA-98205B2BFB06
2F4753A9-ECF2-43C5-AD90-755EE3F908E3
5A977520-8EC5-4000-87B1-BDC40FE8B3FA
84423502-44BA-4BF9-838E-6431675DCFDE
268D981E-BA4B-4324-B954-8792DDAA8843
BF796373-6CDF-4038-AA72-1E0E88E1F087
FFA5E821-B513-4810-8EC7-76CEA5B82614
CE223EBD-E65A-4D35-82A8-95F0137F7667
7C939B63-CE88-49B7-94E4-8E1309B489E6
9DF42D9C-0BB8-4277-BDDF-AF04A1A2A23E
7007542C-41E1-4011-B148-8C829F208702
1E768084-BB1B-4BCD-82C6-9F669E8475C2
546BD709-6CBB-4DA4-9505-A55E5360CBED
8C94A39C-76D0-46AB-9B3C-6559E4C6025E
E86F248B-B068-4064-B28B-7DF87CD427D4
77D2A6B6-1CF6-4E7B-954D-339C7A57F036

exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','Admin','202301','','en'
exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','Admin','202302','','en'
exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','Admin','202307','','en'
exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','Admin','202304','','en'

exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','hmc','202305','','en'
exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','Admin','202306','','en'


exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','Admin','202307','','en'

	exec RSP_GL_PROCESS_REVERSING_JRN 'RCD','Admin', '','',''

	SELECT LINCREMENT_FLAG
      ,LAPPROVAL_FLAG 
FROM GSM_TRANSACTION_CODE (NOLOCK)
WHERE CCOMPANY_ID = 'RCD'
AND CTRANSACTION_CODE='000030'


SELECT IMIN_YEAR = CAST(MIN(CYEAR) AS INT),IMAX_YEAR = CAST(MAX(CYEAR) AS INT) FROM GSM_PERIOD(NOLOCK) WHERE CCOMPANY_ID = 'RCD'
	SELECT LINCREMENT_FLAG
      ,LAPPROVAL_FLAG 
FROM GSM_TRANSACTION_CODE (NOLOCK)
WHERE CCOMPANY_ID = 'RCD'
AND CTRANSACTION_CODE='000030'

UPDATE GSM_TRANSACTION_CODE SET LINCREMENT_FLAG=0
WHERE CTRANSACTION_CODE='000030'

RSP_GL_GET_JOURNAL_DETAIL_LIST 

select * from GST_UPLOAD_PROCESS_STATUS

EXECUTE RSP_ConvertXMLToTable 'RCD', 'HMC','d7927b67e0e84595945532235289df71';
exec RSP_ConvertXMLToTable @CoId, @UserId, @KeyGUID		


--Untuk simpan ke Table Sementara

declare @CoId varchar(50),
@UserId varchar(50),
@KeyGUID varchar(50)

set @CoId='Co01'
set @UserId='GY'
set @KeyGUID='009009009'

select CCOMPANY_ID,
CCOMPANY_NAME from SAM_COMPANIES

--into #tReportEmployee
--from SAM_COMPANIES

exec RSP_ConvertTableToXML @CoId,@UserId,@KeyGUID,'#tReportEmployee',1

drop table #tReportEmployee

exec RSP_ConvertXMLToTable 'Co01', 'GY','009009009'

select CCOMPANY_ID,
CCOMPANY_NAME
from SAM_COMPANIES


declare @CoId varchar(50),
@UserId varchar(50),
@KeyGUID varchar(50)

set @CoId='Co01'
set @UserId='GY'
set @KeyGUID='ABCDE'

exec RSP_ConvertXMLToTable @CoId, @UserId, @KeyGUID

USE [BIMASAKTI_11]
GO

exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'RCD','Admin','202307','','en'

USE [BIMASAKTI_11]
GO

DECLARE	@return_value int

EXEC	@return_value = [dbo].[RSP_GL_PROCESS_REVERSING_JRN]
		@CCOMPANY_ID = N'RCD',
		@CUSER_ID = N'HMC',
		@CDEPT_CODE = N'ACC',
		@CREF_NO = N'JV-2023070011--RVS',
		@CREC_ID = N'972CF4AE-2753-47FF-A419-FAA6FAF264B5'

SELECT	'Return Value' = @return_value

GO


rollback

exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST 'rcd', 'admin', '202307', '', 'EN'
exec RSP_GL_GET_JOURNAL_DETAIL_LIST '84423502-44BA-4BF9-838E-6431675DCFDE', 'en'

select * from GST_UPLOAD_PROCESS_STATUS where CUSER_ID='hmc' 
AND IFINISH = 9
AND CPROCESS_STATUS LIKE'%Finish Processing%'

order by CKE

rollback
update gst_trans_hd
set CSOURCE_REF_NO=''
,CREVERSE_DATE='20230715'
where CTRANS_CODE='000020'

ddba29c597b14af29a90b3cacfb48d4c

select * from GST_UPLOAD_ERROR_STATUS where CKEY_GUID= 'ddba29c597b14af29a90b3cacfb48d4c'



EXECUTE RSP_ConvertXMLToTable 'RCD', 'HPC', '739b8c5f75c24be8a7dd666be2553a4d'
EXECUTE RSP_ConvertXMLToTable 'RCD', 'HPC', '0fa43f4c32f748b9958042e8f304bc1a'
EXECUTE RSP_ConvertXMLToTable 'RCD', 'HPC', '06fdeddfdbad431c9d39399fcfe1c21d'


		INSERT INTO GST_UPLOAD_ERROR_STATUS(CCOMPANY_ID,CUSER_ID,CKEY_GUID,ISEQ_NO,CERROR_MESSAGE)
		Value @CCOMPANY_ID,@CUSER_ID,@CKEY_GUID,ISEQ_NO,CERROR_MESSAGE;
		

--INSERT TO table error
INSERT INTO GST_UPLOAD_ERROR_STATUS(CCOMPANY_ID,CUSER_ID,CKEY_GUID,ISEQ_NO,CERROR_MESSAGE)
VALUES ('RCD', 'HMC','1212qwert',100, 'Error Handle' );

select * from GST_UPLOAD_ERROR_STATUS where CKEY_GUID= '1212qwert'


	exec RSP_GL_PROCESS_REVERSING_JRN 'RCD','Admin', 'A','',''

	exec RSP_GS_GET_COMPANY_INFO  'rcd'
	RSP_GL_PROCESS_REVERSING_JRN
	RSP_GS_GET_TRANS_CODE_INFO 'rcd', '000020'
	RSP_GL_PROCESS_REVERSING_JRN
USE [BIMASAKTI_11]
GO

DECLARE	@return_value int

EXEC	@return_value = [dbo].[RSP_GL_SEARCH_ACTIVE_REVERSING_LIST]
		@CCOMPANY_ID = N'RCD',
		@CUSER_ID = N'admin',
		@CPERIOD = N'202307',
		@CSEARCH_TEXT = 'a',
		@CLANGUAGE_ID = N'EN'

SELECT	'Return Value' = @return_value

GO

RSP_GL_GET_SYSTEM_PARAM 'rcd','en'

RSP_GS_GET_PERIOD_YEAR_RANGE 'rcd', '',''

RSP_GS_GET_TRANS_CODE_INFO 'rcd' '000020'

exec RSP_GL_GET_BUDGET_DT 'rcd'

begin transaction


USE [BIMASAKTI_11]
GO

RSP_GL_SEARCH_ACTIVE_REVERSING_LIST
@CCOMPANY_ID= 'BSI', 
@CLANGUAGE_ID= 'en', 
@CPERIOD= '202412', 
@CSEARCH_TEXT= '', 
@CUSER_ID = 'HMC'

DECLARE	@return_value int

EXEC	@return_value = [dbo].[RSP_GL_PROCESS_REVERSING_JRN]
		@CCOMPANY_ID = 'BSI',
		@CUSER_ID = 'HMC',
		@CDEPT_CODE = '02',
		@CREF_NO = 'JV-2024110006--RVS',
		@CREC_ID = '72541B0D-5810-4FDA-ABDF-C6496E831E04',
		@INO = 1,
		@CKEY_GUID = '1253273823'

SELECT	'Return Value' = @return_value
GO

rollback

begin transaction

exec RSP_GL_SEARCH_ACTIVE_REVERSING_LIST
@CCOMPANY_ID	='BSI',
@CUSER_ID		='HMC',
@CPERIOD		='202504',
@CSEARCH_TEXT	='',
@CLANGUAGE_ID	='en'

exec RSP_GL_PROCESS_REVERSING_JRN
@CCOMPANY_ID	='BSI',
@CUSER_ID		='HMC',
@CDEPT_CODE		='02',
@CREF_NO		='JV-2025030002--RVS',
@CREC_ID		='9A942AB1-B8CF-444C-B45A-BD6BFCFFEDAE',
@INO			='1',
@CKEY_GUID		='12wa'
rollback

PMT_AGREEMENT