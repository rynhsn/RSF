@inherits R_Page;
@inject R_ILocalizer<Resources_PMT01500_Class> _localizer

<R_StackLayout>

    @* Agreement No *@
    <R_ItemLayout col="12" Class="d-flex">

        @* Pembagi pertama *@
        <R_ItemLayout col="3" Class="d-flex">

            <R_ItemLayout col="6">
                <R_Label>
                    @_localizer["_AgreementNo"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="6">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CREF_NO"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
        </R_ItemLayout>

        @* Pembagi kedua *@
        <R_ItemLayout col="4" Class="d-flex ps-4">
            <R_ItemLayout col="3">
                <R_Label>
                    @_localizer["_Tenant"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CTENANT_ID"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
            <R_ItemLayout col="6" Class="ps-1">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CTENANT_NAME"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
        </R_ItemLayout>

        @* Pembagi ketiga *@
        <R_ItemLayout col="4" Class="d-flex ps-4">
            <R_ItemLayout col="3">
                <R_Label>
                    @_localizer["_Building"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CBUILDING_ID"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
            <R_ItemLayout col="6" Class="ps-1">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CBUILDING_NAME"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
        </R_ItemLayout>

    </R_ItemLayout>

    @* Agreement Unit(s) *@
    <R_ItemLayout col="12" Class="d-flex">

        @* Pembagi pertama *@
        <R_ItemLayout col="3" Class="d-flex">

            <R_ItemLayout col="6">
                <R_Label>
                    @_localizer["_AgreementUnit(s)"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="6">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CUNIT_NAME_LIST"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
        </R_ItemLayout>

        @* Pembagi kedua *@
        <R_ItemLayout col="4" Class="d-flex ps-4">
            <R_ItemLayout col="3">
                <R_Label>
                    @_localizer["_UnitId"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CUNIT_ID"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
            <R_ItemLayout col="6" Class="ps-1">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CUNIT_NAME"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
        </R_ItemLayout>

        @* Pembagi ketiga *@
        <R_ItemLayout col="4" Class="d-flex ps-4">
            <R_ItemLayout col="3">
                <R_Label>
                    @_localizer["_Currency"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="3">
                <R_TextBox @bind-Value="@_depositViewModel.loEntityDepositHeader.CCURRENCY_CODE"
                           R_ConductorSource="@_conductorDeposit"
                           Enabled="false" />
            </R_ItemLayout>
        </R_ItemLayout>

    </R_ItemLayout>

    @* List *@
    <R_Grid @ref="@_gridDeposit"
            DataSource="_depositViewModel.loListPMT01500Deposit"
            R_ConductorSource="@_conductorDeposit"
            R_GridType="@R_eGridType.Navigator"
            R_ServiceGetListRecord="@GetListDeposit"
            Pageable
            Width="1050px"
            Height="270px"
            PageSize="15"
            AllowDeleteRow="false"
            AllowAddNewRow="false"
            AllowEditRow="false">
        <R_GridColumns>
            <R_GridTextColumn Width="200px"
                              FieldName="@nameof(PMT01500DepositListDTO.CSEQ_NO)"
                              HeaderText="@_localizer["_SeqNo"]" />

            <R_GridTextColumn Width="200px"
                              FieldName="@nameof(PMT01500DepositListDTO.CDEPOSIT_ID)"
                              HeaderText="@_localizer["_DepositID"]" />

            <R_GridTextColumn Width="200px"
                              FieldName="@nameof(PMT01500DepositListDTO.CDEPOSIT_NAME)"
                              HeaderText="@_localizer["_DepositName"]" />

            <R_GridDatePickerColumn Width="200px"
                                    FieldName="@nameof(PMT01500DepositListDTO.DDEPOSIT_DATE)"
                                    HeaderText="@_localizer["_DepositDate"]" />

            <R_GridNumericColumn Width="200px"
                                 FieldName="@nameof(PMT01500DepositListDTO.NDEPOSIT_AMT)"
                                 HeaderText="@_localizer["_DepositAmount"]" />

            <R_GridTextColumn Width="200px"
                              FieldName="@nameof(PMT01500DepositListDTO.CUPDATE_BY)"
                              HeaderText="@_localizer["_UpdatedBy"]" />


            <R_GridDateTimePickerColumn Width="225px"
                                        FieldName="@nameof(PMT01500DepositListDTO.DUPDATE_DATE)"
                                        HeaderText="@_localizer["_UpdatedDate"]" />

            <R_GridTextColumn Width="200px"
                              FieldName="@nameof(PMT01500DepositListDTO.CCREATE_BY)"
                              HeaderText="@_localizer["_CreatedBy"]" />

            <R_GridDateTimePickerColumn Width="225px"
                                        FieldName="@nameof(PMT01500DepositListDTO.DCREATE_DATE)"
                                        HeaderText="@_localizer["_CreatedDate"]" />
        </R_GridColumns>
    </R_Grid>

    @* Detail *@
    <R_ItemLayout>

        @* Seq No *@
        <R_ItemLayout Class="d-flex">

            <R_ItemLayout col="2">
                <R_Label>
                    @_localizer["_SeqNo"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="1">
                <R_ItemLayout col="9">
                    <R_TextBox @bind-Value="@_depositViewModel.Data.CSEQ_NO"
                               R_ConductorSource="@_conductorDeposit"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_ItemLayout>

        </R_ItemLayout>

        @* Contractor *@
        <R_ItemLayout Class="d-flex">

            <R_ItemLayout col="2" Class="d-flex">
                <R_ItemLayout col="1" Class="d-flex align-items-start">
                    <R_CheckBox Value="@_depositViewModel.Data.LCONTRACTOR"
                                R_ConductorSource="@_conductorDeposit"
                                ValueChanged="OnChangeLCONTRACTOR"
                                R_EnableAdd
                                R_EnableEdit />
                </R_ItemLayout>

                <R_ItemLayout col="11">
                    <R_Label>
                        @_localizer["_Contractor"]
                    </R_Label>
                </R_ItemLayout>
            </R_ItemLayout>



            <R_ItemLayout col="1">
                <R_TextBox @bind-Value="@_depositViewModel.Data.CCONTRACTOR_ID"
                           R_ConductorSource="@_conductorDeposit"
                           MaxLength="20"
                           OnLostFocus="@OnLostFocusContractor"
                           Enabled="(_lControlContractor && _depositViewModel.Data.LCONTRACTOR)">
                </R_TextBox>
            </R_ItemLayout>

            <R_ItemLayout col="3" Class="d-flex">
                <R_ItemLayout Class="ps-1">
                    <R_Lookup R_ConductorSource="@_conductorDeposit"
                              @ref="@R_LookupContractorLookup"
                              Enabled="(_lControlContractor && _depositViewModel.Data.LCONTRACTOR)"
                              R_Before_Open_Lookup="@BeforeOpenLookUpContractorLookup"
                              R_After_Open_Lookup="@AfterOpenLookUpContractorLookup">
                        ...
                    </R_Lookup>
                </R_ItemLayout>

                <R_ItemLayout col="11">
                    <R_TextBox @bind-Value="@_depositViewModel.Data.CCONTRACTOR_NAME"
                               R_ConductorSource="@_conductorDeposit"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_ItemLayout>

        </R_ItemLayout>

        @* Deposit JG *@
        <R_ItemLayout Class="d-flex">

            <R_ItemLayout col="2">
                <R_Label>
                    @_localizer["_DepositID"]*
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="1">
                <R_TextBox @bind-Value="@_depositViewModel.Data.CDEPOSIT_ID"
                           R_ConductorSource="@_conductorDeposit"
                           MaxLength="8"
                           OnLostFocus="@OnLostFocusDepositJG"
                           R_EnableAdd
                           R_EnableEdit>
                </R_TextBox>
            </R_ItemLayout>

            <R_ItemLayout col="3" Class="d-flex">
                <R_ItemLayout Class="ps-1">
                    <R_Lookup R_ConductorSource="@_conductorDeposit"
                              @ref="@R_LookupDepositJGLookup"
                              R_EnableAdd
                              R_EnableEdit
                              R_Before_Open_Lookup="@BeforeOpenLookUpDepositJGLookup"
                              R_After_Open_Lookup="@AfterOpenLookUpDepositJGLookup">
                        ...
                    </R_Lookup>
                </R_ItemLayout>

                <R_ItemLayout col="11">
                    <R_TextBox @bind-Value="@_depositViewModel.Data.CDEPOSIT_NAME"
                               R_ConductorSource="@_conductorDeposit"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_ItemLayout>

        </R_ItemLayout>

        @* Deposit Date *@
        <R_ItemLayout Class="d-flex">

            <R_ItemLayout col="2">
                <R_Label>
                    @_localizer["_DepositDate"]*
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="2">
                <R_DatePicker @bind-Value="@_depositViewModel.Data.DDEPOSIT_DATE"
                              R_ConductorSource="@_conductorDeposit"
                              R_EnableAdd
                              R_EnableEdit>
                </R_DatePicker>
            </R_ItemLayout>

        </R_ItemLayout>

        @* Deposit Amount *@
        <R_ItemLayout Class="d-flex mt-1">

            <R_ItemLayout col="2">
                <R_Label>
                    @_localizer["_DepositAmount"]*
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="2">
                <R_NumericTextBox @bind-Value="@_depositViewModel.Data.NDEPOSIT_AMT"
                                  R_ConductorSource="@_conductorDeposit"
                                  R_EnableAdd
                                  R_EnableEdit>
                </R_NumericTextBox>
            </R_ItemLayout>

        </R_ItemLayout>

        @* Description *@
        <R_ItemLayout Class="d-flex">

            <R_ItemLayout col="2">
                <R_Label>
                    @_localizer["_Description"]
                </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="4">
                <R_TextArea @bind-Value="@_depositViewModel.Data.CDESCRIPTION"
                            R_ConductorSource="@_conductorDeposit"
                            R_EnableAdd
                            R_EnableEdit>
                </R_TextArea>
            </R_ItemLayout>

        </R_ItemLayout>

    </R_ItemLayout>

    @* Button CRUD *@
    <R_StackLayout Row Class="d-flex justify-content-between">

        <R_StackLayout Row>

            <R_ItemLayout>
                <R_AddButton R_Conductor="@_conductorDeposit" />
            </R_ItemLayout>

            <R_ItemLayout>
                <R_EditButton R_Conductor="@_conductorDeposit" />
            </R_ItemLayout>

            <R_ItemLayout>
                <R_DeleteButton R_Conductor="@_conductorDeposit" />
            </R_ItemLayout>

        </R_StackLayout>

        <R_StackLayout Row Class="d-flex justify-content-end">

            <R_StackLayout Row>

                <R_ItemLayout>
                    <R_CancelButton R_Conductor="@_conductorDeposit" />
                </R_ItemLayout>

                <R_ItemLayout>
                    <R_SaveButton R_Conductor="@_conductorDeposit" />
                </R_ItemLayout>

            </R_StackLayout>

        </R_StackLayout>



    </R_StackLayout>

</R_StackLayout>



<R_Conductor @ref="@_conductorDeposit"
             R_ViewModel="@_depositViewModel"
             R_IsHeader
             R_Display="@ServiceR_DisplayAsync"
             R_ServiceGetRecord="@ServiceGetRecord"
             R_AfterAdd="@ServiceAfterAdd"
             R_Validation="@R_Validation"
             R_ServiceSave="@ServiceSave"
             R_ServiceDelete="@ServiceDelete"
             R_AfterDelete="@AfterDelete"
             R_SetOther="@SetOtherAsync" />

