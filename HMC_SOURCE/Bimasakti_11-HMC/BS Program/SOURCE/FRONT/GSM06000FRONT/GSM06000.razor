@page "/GSM06000"
@using GSM06000Common;
@inherits R_Page;


<R_PredefinedDock
    R_InstantiateDock="@PreDock_InstantiateDock"
    R_AfterOpenPredefinedDock="@R_AfterOpenPredefinedDock"
    Title="Cash/Bank Account"/>

<R_StackLayout Row="true">

    <R_ItemLayout Class="col-3">
        <R_ItemLayout col="2">
            <R_Label>Type</R_Label>
        </R_ItemLayout>

        <R_ItemLayout col="10">
            <R_RadioGroup
                Data="@_viewModel.loTypeModeList"
                @bind-Value="@_viewModel.PropertyTypeContext"
                ValueField="@nameof(GSM06000CodeDTO.CCODE)"
                TextField="@nameof(GSM06000CodeDTO.CDESCRIPTION)"
                R_ConductorSource="@_conductorRef"/>
        </R_ItemLayout>
    </R_ItemLayout>

    <R_ItemLayout Class="col-3">
        <R_ItemLayout col="2">
            <R_Label>Bank</R_Label>
        </R_ItemLayout>

        <R_ItemLayout col="10">
            <R_RadioGroup
                Data="@_viewModel.loTypeBankList"
                @bind-Value="@_viewModel.PropertyBankContext"
                ValueField="@nameof(GSM06000CodeDTO.CCODE)"
                TextField="@nameof(GSM06000CodeDTO.CDESCRIPTION)"
                R_ConductorSource="@_conductorRef">
            </R_RadioGroup>
        </R_ItemLayout>
    </R_ItemLayout>

    <R_ItemLayout
        class="d-flex align-items-end"
        col="3">
        <R_Button
            Class="btn btn-light"
            R_ConductorSource="@_conductorRef"
            OnClick="@OnChanged">
        REFRESH
        </R_Button>

    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Spacing="3" Class="mb-4">
    <R_StackLayout>
        <R_Grid
            @ref="@_gridRef"
            DataSource="@_viewModel.loGridList"
            R_ConductorSource="@_conductorRef"
            R_GridType="@R_eGridType.Navigator"
            R_ServiceGetListRecord="@ServiceGetListRecord"
            Pageable
            Height="150px"
            PageSize="5">
            <R_GridColumns>

                <R_GridTextColumn
                    Width="80px"
                    FieldName="@nameof(GSM06000DTO.CCB_CODE)"
                    HeaderText="Code"/>

                <R_GridTextColumn
                    Width="300px"
                    FieldName="@nameof(GSM06000DTO.CCB_NAME)"
                    HeaderText="Name"/>

                <R_GridTextColumn
                    Width="110px"
                    FieldName="@nameof(GSM06000DTO.CUPDATE_BY)"
                    HeaderText="Updated By"/>

                <R_GridDateTimePickerColumn
                    Width="200px"
                    FieldName="@nameof(GSM06000DTO.DUPDATE_DATE)"
                    HeaderText="Updated Date"/>

                <R_GridTextColumn
                    Width="110px"
                    FieldName="@nameof(GSM06000DTO.CCREATE_BY)"
                    HeaderText="Created By"/>

                <R_GridDateTimePickerColumn
                    Width="200px"
                    FieldName="@nameof(GSM06000DTO.DCREATE_DATE)"
                    HeaderText="Created Date"/>

            </R_GridColumns>
        </R_Grid>

    </R_StackLayout>
</R_StackLayout>

<R_StackLayout>


    <R_StackLayout>

        <R_StackLayout Row="true">
            <R_ItemLayout col="2">
                <R_Label>Cash/Bank</R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="1">
                <R_TextBox
                    @bind-Value="@_viewModel.Data.CCB_CODE"
                    R_ConductorSource="@_conductorRef"
                    R_EnableAdd="true"
                    R_EnableEdit="false">
                </R_TextBox>
            </R_ItemLayout>
            <R_ItemLayout col="4">
                <R_TextBox
                    @bind-Value="@_viewModel.Data.CCB_NAME"
                    R_ConductorSource="@_conductorRef"
                    R_EnableAdd="true"
                    R_EnableEdit="false">
                </R_TextBox>
            </R_ItemLayout>
        </R_StackLayout>

        <R_StackLayout Row="true">
            <R_ItemLayout col="2">
                <R_Label>Address </R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="5">
                <R_TextArea
                    @bind-Value="@_viewModel.Data.CADDRESS"
                    R_ConductorSource="@_conductorRef"
                    R_EnableAdd="true"
                    R_EnableEdit="true">
                </R_TextArea>
            </R_ItemLayout>

            <R_StackLayout Class="col-6 ms-4">

                <R_StackLayout Row>
                    <R_ItemLayout col="2">
                        <R_Label>Phone 1</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="4">
                        <R_TextBox
                            @bind-Value="@_viewModel.Data.CPHONE1"
                            R_ConductorSource="@_conductorRef"
                            R_EnableAdd="true"
                            R_EnableEdit="true">
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

                <R_StackLayout Row="true">
                    <R_ItemLayout col="2">
                        <R_Label>Phone 2</R_Label>
                    </R_ItemLayout>

                    <R_ItemLayout col="4">
                        <R_TextBox
                            @bind-Value="@_viewModel.Data.CPHONE2"
                            R_ConductorSource="@_conductorRef"
                            R_EnableAdd="true"
                            R_EnableEdit="true">
                        </R_TextBox>
                    </R_ItemLayout>
                </R_StackLayout>

            </R_StackLayout>
        </R_StackLayout>

        <R_StackLayout Row="true">

            <R_ItemLayout col="2">
                <R_Label>Email</R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="5">
                <R_TextBox
                    @bind-Value="@_viewModel.Data.CEMAIL"
                    R_ConductorSource="@_conductorRef"
                    R_EnableEdit="true"
                    R_EnableAdd="true">
                </R_TextBox>
            </R_ItemLayout>

        </R_StackLayout>

        <R_StackLayout Row="true">

            <R_ItemLayout col="2">
                <R_Label>Attention Name</R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="5">
                <R_TextBox
                    @bind-Value="@_viewModel.Data.CATTENTION_NAME"
                    R_ConductorSource="@_conductorRef"
                    R_EnableEdit="true"
                    R_EnableAdd="true">
                </R_TextBox>
            </R_ItemLayout>

        </R_StackLayout>

        <R_StackLayout Row>

            <R_ItemLayout col="2">
                <R_Label>Attention Position</R_Label>
            </R_ItemLayout>

            <R_ItemLayout col="5">
                <R_TextBox
                    @bind-Value="@_viewModel.Data.CATTENTION_POSITION"
                    R_ConductorSource="@_conductorRef"
                    R_EnableEdit="true"
                    R_EnableAdd="true">
                </R_TextBox>
            </R_ItemLayout>

        </R_StackLayout>

        <R_StackLayout Row="true" Spacing="3" Class="d-flex justify-content-between">

            <R_StackLayout Row="true">

                <R_ItemLayout >
                    <R_AddButton R_Conductor="@_conductorRef"></R_AddButton>
                </R_ItemLayout>

                <R_ItemLayout >
                    <R_EditButton R_Conductor="@_conductorRef"></R_EditButton>
                </R_ItemLayout>

                <R_ItemLayout>
                    <R_DeleteButton R_Conductor="@_conductorRef"></R_DeleteButton>
                </R_ItemLayout>


                <R_ItemLayout>
                    <R_Button
                        R_ConductorSource="@_conductorRef"
                        OnClick="@DownloadTemplate">
                        Template
                    </R_Button>
                </R_ItemLayout>

                <R_ItemLayout>
                    <R_Popup
                        R_ConductorSource="_conductorRef"
                        R_Before_Open_Popup="Before_Open_Upload_Popup"
                        R_After_Open_Popup="After_Open_Upload_Popup">
                        Upload
                    </R_Popup>
                </R_ItemLayout>

            </R_StackLayout>

            <R_StackLayout Row="true">
                <R_ItemLayout>
                    <R_CancelButton R_Conductor="@_conductorRef"></R_CancelButton>
                </R_ItemLayout>

                <R_ItemLayout>
                    <R_SaveButton R_Conductor="@_conductorRef"></R_SaveButton>
                </R_ItemLayout>

            </R_StackLayout>

        </R_StackLayout>
    </R_StackLayout>

</R_StackLayout>

<R_Conductor
    @ref="@_conductorRef"
    R_ViewModel="@_viewModel"
    R_ServiceGetRecord="@ServiceGetRecord"
    R_BeforeAdd="@BeforeAdd"
    R_IsHeader="true"
    R_Validation="@ValidationGSM06000"
    R_ServiceSave="@ServiceSave"
    R_ServiceDelete="@ServiceDelete"
    R_AfterDelete="@R_AfterDelete"/>