@page "/HDM00500"
@inherits R_Page

@* property *@
<R_StackLayout Row>
    <R_ItemLayout col="1">
        <R_Label FontStyle="R_eFontStyle.Bold" FontColor="R_eFontColor.Danger">@_localizer["_lbl_property"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="3">
        <R_ComboBox Data="@_viewModel_Taskchecklist._propertyList"
                    Value="@_viewModel_Taskchecklist._propertyId"
                    ValueField="@nameof(PropertyDTO.CPROPERTY_ID)"
                    TextField="@nameof(PropertyDTO.CPROPERTY_NAME)"
                    ValueChanged="@((string value) => ComboboxProperty_ValueChangedAsync(value))"
                    Enabled="@_enableComboboxProperty">
        </R_ComboBox>
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout>
    <R_Grid @ref="@_gridTaskcheklistDTO"
            DataSource="@_viewModel_Taskchecklist._taskchecklist_list"
            Pageable
            @bind-PageSize="@_pageSizeTaskChecklist"
            R_ConductorGridSource="@_conTaskchecklist"
            R_GridType="@R_eGridType.Original"
            R_ServiceGetListRecord="@Taskchecklist_ServiceGetListRecord"
            Height="270px"
            R_ServiceGetRecord="@Taskchecklist_ServiceGetRecord"
            R_Display="@Taskchecklist_RDisplay"
            R_ServiceDelete="@Taskchecklist_ServiceDelete"
            R_AfterDelete="@Taskchecklist_AfterDeleteAsync"
            R_AfterAdd="@Taskchecklist_AfterAdd"
            R_ServiceSave="@Taskchecklist_ServiceSave"
            R_Before_Open_Grid_Lookup="@Taskchecklist_BeforeOpenGridLookupAsync"
            R_After_Open_Grid_Lookup="@Taskchecklist_AfterOpenGridLookup"
            R_CellLostFocused="@Taskchecklist_CellLostFocused"
            AllowAddNewRow
            AllowDeleteRow
            AllowEditRow
            Enabled="@_enableGridTaskchecklist">
        <R_GridColumns>
            <R_GridCheckBoxColumn FieldName="@nameof(TaskchecklistDTO.LACTIVE)"
                                  HeaderText="@(_localizer["_col_active"])"
                                  Width="90px"
                                  R_EnableAdd="false"
                                  R_EnableEdit="false"></R_GridCheckBoxColumn>
            <R_GridTextColumn FieldName="@nameof(TaskchecklistDTO.CTASK_CHECKLIST_ID)"
                              HeaderText="@(_localizer["_col_taskchecklist"])"
                              Width="150px"
                              R_EnableAdd
                              R_EnableEdit></R_GridTextColumn>
            <R_GridTextColumn FieldName="@nameof(TaskchecklistDTO.CTASK_CHECKLIST_NAME)"
                              HeaderText="@(_localizer["_col_taskchecklistname"])"
                              Width="250px"
                              R_EnableAdd
                              R_EnableEdit></R_GridTextColumn>
            <R_GridTextColumn FieldName="@nameof(TaskchecklistDTO.CUPDATE_BY)"
                              HeaderText="@(_localizer["_col_updatedby"])"
                              Width="120px"
                              R_EnableAdd="false"
                              R_EnableEdit="false"></R_GridTextColumn>
            <R_GridDateTimePickerColumn FieldName="@nameof(TaskchecklistDTO.DUPDATE_DATE)"
                                        HeaderText="@(_localizer["_col_updateddate"])"
                                        Width="180px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false"></R_GridDateTimePickerColumn>
            <R_GridTextColumn FieldName="@nameof(TaskchecklistDTO.CCREATE_BY)"
                              HeaderText="@(_localizer["_col_createdby"])"
                              Width="120px"
                              R_EnableAdd="false"
                              R_EnableEdit="false"></R_GridTextColumn>
            <R_GridDateTimePickerColumn FieldName="@nameof(TaskchecklistDTO.DCREATE_DATE)"
                                        HeaderText="@(_localizer["_col_createddate"])"
                                        Width="180px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false"></R_GridDateTimePickerColumn>
        </R_GridColumns>
    </R_Grid>
</R_StackLayout>

<R_StackLayout>
    <R_Grid DataSource="@_viewModel_Checklist._checklist_list"
            @ref="@_gridCheklistDTO"
            Pageable
            @bind-PageSize="@_pageSizeChecklist"
            R_GridType="@R_eGridType.Original"
            R_ConductorGridSource="@_conChecklist"
            AllowAddNewRow
            AllowEditRow
            AllowDeleteRow
            Enabled="@_enableGridChecklist"
            R_ServiceGetListRecord="@Checklist_ServiceGetListRecord"
            Height="270px"
            R_ServiceGetRecord="@Checklist_ServiceGetRecord"
            R_ServiceDelete="@Checklist_ServiceDelete"
            R_AfterAdd="@Checklist_AfterAdd"
            R_Validation="@Checklist_Validation"
            R_ServiceSave="@Checklist_ServiceSave">
        <R_GridColumns>
            <R_GridTextColumn FieldName="@nameof(ChecklistDTO.CCHECKLIST_CODE)"
                              HeaderText="@(_localizer["_col_checklistcode"])"
                              Width="150px"
                              R_EnableAdd
                              R_EnableEdit></R_GridTextColumn>
            <R_GridTextColumn FieldName="@nameof(ChecklistDTO.CCHECKLIST_NAME)"
                              HeaderText="@(_localizer["_col_checklistname"])"
                              Width="200px"
                              R_EnableAdd
                              R_EnableEdit></R_GridTextColumn>
            <R_GridTextColumn FieldName="@nameof(ChecklistDTO.CDESCRIPTION)"
                              HeaderText="@(_localizer["_col_desc"])"
                              Width="300px"
                              R_EnableAdd
                              R_EnableEdit></R_GridTextColumn>
            <R_GridTextColumn FieldName="@nameof(ChecklistDTO.CUPDATE_BY)"
                              HeaderText="@(_localizer["_col_updatedby"])"
                              Width="120px"
                              R_EnableAdd="false"
                              R_EnableEdit="false"></R_GridTextColumn>
            <R_GridDateTimePickerColumn FieldName="@nameof(ChecklistDTO.DUPDATE_DATE)"
                                        HeaderText="@(_localizer["_col_updateddate"])"
                                        Width="180px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false"></R_GridDateTimePickerColumn>
            <R_GridTextColumn FieldName="@nameof(ChecklistDTO.CCREATE_BY)"
                              HeaderText="@(_localizer["_col_createdby"])"
                              Width="120px"
                              R_EnableAdd="false"
                              R_EnableEdit="false"></R_GridTextColumn>
            <R_GridDateTimePickerColumn FieldName="@nameof(ChecklistDTO.DCREATE_DATE)"
                                        HeaderText="@(_localizer["_col_createddate"])"
                                        Width="180px"
                                        R_EnableAdd="false"
                                        R_EnableEdit="false"></R_GridDateTimePickerColumn>
        </R_GridColumns>
    </R_Grid>
</R_StackLayout>

<R_StackLayout Row>
    <R_ItemLayout>
        <R_Popup Enabled="@(_viewModel_Taskchecklist._taskchecklist_list.Count>0&_conTaskchecklist.R_ConductorMode==R_eConductorMode.Normal)"
                 R_Before_Open_Popup="@BtnActiveInactiveTaskchecklist_BeforeOpenPopupAsync"
                 R_After_Open_Popup="@BtnActiveInactiveTaskchecklist_AfterOpenPopup">@_labelActiveInactive</R_Popup>
    </R_ItemLayout>
</R_StackLayout>

<R_ConductorGrid @ref="@_conTaskchecklist"
                 R_SetOther="@Taskchecklist_SetOther"
                 R_IsHeader />
<R_ConductorGrid @ref="@_conChecklist"
                 R_ConductorParent="@_conTaskchecklist"
                 R_SetOther="@Checklist_SetOther" />